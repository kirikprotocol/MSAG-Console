#ifndef TEST_CONFIG_CONFIG_UTIL
#define TEST_CONFIG_CONFIG_UTIL

#include "test/core/SmeRegistry.hpp"
#include "test/core/AliasRegistry.hpp"
#include "test/core/RouteRegistry.hpp"
#include "util/debug.h"

namespace smsc {
namespace test {
namespace config {

using smsc::sms::Address;
using smsc::smeman::SmeSystemId;
using smsc::test::core::SmeRegistry;
using smsc::test::core::AliasRegistry;
using smsc::test::core::RouteRegistry;

class ConfigUtil
{
	SmeRegistry* smeReg;
	AliasRegistry* aliasReg;
	RouteRegistry* routeReg;
public:
	ConfigUtil(SmeRegistry* _smeReg, AliasRegistry* _aliasReg,
		RouteRegistry* _routeReg)
	: smeReg(_smeReg), aliasReg(_aliasReg), routeReg(_routeReg)
	{
		__require__(smeReg);
		__require__(aliasReg);
		__require__(routeReg);
	}
	void setupSystemSme();
	void setupSystemSmeRoutes();

	void setupDuplexRoutes(const Address& addr1, const SmeSystemId smeId1,
		const Address& addr2, const SmeSystemId smeId2);
	
	void checkRoute(const Address& origAddr, const SmeSystemId& origSmeId,
		const Address& destAlias, int* numRoutes = NULL, int* numBound = NULL);
	
	void checkRoute2(const Address& origAddr, const SmeSystemId& origSmeId,
		const Address& destAlias);
	
	bool checkAlias(const Address& addr);

	bool checkRouteArchBill(const Address& srcAddr,
		const Address& destAlias, bool& archived, bool& billing);
};

}
}
}

#endif /* TEST_CONFIG_CONFIG_UTIL */

