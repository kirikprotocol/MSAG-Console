#include <stdio.h>
#include <unistd.h>
#include <string.h>
#include <stdlib.h>
#include <stdio.h>
#include "smpp/smpp.h"
#include "sms/sms.h"
#include "smeman/smsccmd.h"
#include "smpp/smpp_err.h"
#include "util/smstext.h"
#include "util/templates/Formatters.h"
#include "resourcemanager/ResourceManager.hpp"
#include "system/state_machine.hpp"
#include "util/regexp/RegExp.hpp"

using namespace smsc::sms;
using namespace smsc::smpp;
using namespace smsc::smeman;
using namespace smsc::util;
using namespace smsc::util::templates;
using namespace smsc::resourcemanager;
using smsc::system::StateMachine;

using std::exception;

class fuck{};

class ReceiptGetAdapter:public GetAdapter{
public:

  virtual bool isNull(const char* key)
      throw(AdapterException)
  {
    return false;
  }

  virtual const char* getString(const char* key)
      throw(AdapterException)
  {
    return "";
  }

  virtual int8_t getInt8(const char* key)
      throw(AdapterException)
  {
    return 0;
  }

  virtual int16_t getInt16(const char* key)
      throw(AdapterException)
  {
    return 0;
  }

  virtual int32_t getInt32(const char* key)
      throw(AdapterException)
  {
    return 0;
  }

  virtual int64_t getInt64(const char* key)
      throw(AdapterException)
  {
    return 0;
  }


  virtual uint8_t getUint8(const char* key)
      throw(AdapterException)
  {
    return 0;
  }

  virtual uint16_t getUint16(const char* key)
      throw(AdapterException)
  {
    return 0;
  }

  virtual uint32_t getUint32(const char* key)
      throw(AdapterException)
  {
    return 0;
  }

  virtual uint64_t getUint64(const char* key)
      throw(AdapterException)
  {
    return 0;
  }


  virtual float getFloat(const char* key)
      throw(AdapterException)
  {
    return 0;
  }

  virtual double getDouble(const char* key)
      throw(AdapterException)
  {
    return 0;
  }

  virtual long double getLongDouble(const char* key)
      throw(AdapterException)
  {
    return 0;
  }


  virtual time_t getDateTime(const char* key)
      throw(AdapterException)
  {
    return 0;
  }

};

struct Test{
  char *msg;
  int sz;
  int dc;
  int dstdc;
};

char bin1[]={
0x00,0x33,0x00,0x2a,0x00,0x20,0x00,0x54,0x00,0x40,0x04,0x2a,0x04,0x3b,0x00,0x35,0x00,0x32,0x00,0x38,0x00,0x36,0x04,0x01,0x04,0x19,0x04,0x36,0x04,0x11,0x00,0x48,0x00,0x7c,0x00,0x2e,0x04,0x4b,0x00,0x0a,0x00,0x35,0x00,0x36,0x00,0x4c,0x00,0x32,0x00,0x7c,0x00,0x4e,0x04,0x2a,0x04,0x1a,0x04,0x2d,0x00,0x20,0x04,0x20,0x00,0x38,0x00,0x4c,0x00,0x31,0x00,0x35,0x00,0x5e,0x00,0x5c,0x00,0x50,0x04,0x19,0x04,0x1c,0x00,0x0a,0x00,0x52,0x00,0x30,0x00,0x34,0x00,0x56,0x00,0x20,0x04,0x2f,0x00,0x37,0x00,0x34,0x04,0x1e,0x00,0x3b,0x00,0x67,0x00,0x4c,0x00,0x5a,0x00,0x36,0x00,0x38,0x00,0x32,0x00,0x20,0x04,0x3b,0x00,0x3d,0x00,0x0a,0x04,0x24,0x00,0x35,0x00,0x62,0x00,0x38,0x04,0x39,0x00,0x4f,0x00,0x3d,0x00,0x63,0x04,0x48,0x00,0x0a,0x00,0x2c,0x00,0x48,0x04,0x2f,0x00,0x2c,0x04,0x34,0x00,0x4a,0x04,0x38,0x00,0x4f,0x00,0x4d,0x00,0x5c,0x00,0x33,0x00,0x39,0x04,0x15,0x00,0x31,0x04,0x19,0x04,0x1a,0x00,0x0a,0x04,0x39,0x04,0x37,0x00,0x36,0x00,0x33,0x00,0x33,0x00,0x53,0x04,0x3c,0x00,0x37,0x00,0x5f,0x00,0x44,0x04,0x24,0x00,0x30,0x00,0x64,0x00,0x4d,0x04,0x31,0x00,0x34,0x00,0x70,0x00,0x78,0x00,0x3c,0x00,0x2f,0x00,0x3a,0x00,0x7a,0x00,0x37,0x00,0x20,0x04,0x25,0x00,0x2d,0x00,0x37,0x00,0x20,0x00,0x30,0x04,0x11,0x00,0x38,0x00,0x34,0x00,0x29,0x00,0x52,0x00,0x73,0x00,0x20,0x00,0x52,0x04,0x27,0x00,0x5f,0x00,0x27,0x00,0x0a,0x00,0x32,0x00,0x20,0x04,0x1e,0x00,0x2b,0x00,0x33,0x00,0x2a,0x00,0x40,0x00,0x36,0x00,0x2b,0x00,0x3c,0x04,0x12,0x04,0x01,0x00,0x20,0x04,0x51,0x00,0x2e,0x04,0x45,0x00,0x28,0x04,0x41,0x00,0x2d,0x00,0x4d,0x04,0x1b,0x04,0x31,0x04,0x18,0x00,0x31,0x00,0x38,0x04,0x29,0x04,0x30,0x04,0x19,0x04,0x19,0x00,0x57,0x00,0x20,0x00,0x4d,0x00,0x3d,0x00,0x5b,0x00,0x48,0x00,0x7d,0x00,0x5d,0x00,0x7d,0x00,0x0a,0x00,0x6c,0x00,0x38,0x00,0x6c,0x00,0x38,0x04,0x10,0x00,0x3d,0x00,0x4b,0x00,0x38,0x00,0x2a,0x00,0x35,0x00,0x50,0x04,0x28,0x00,0x2a,0x00,0x34,0x00,0x55,0x04,0x26,0x00,0x33,0x00,0x3c,0x00,0x20,0x00,0x28,0x04,0x26,0x04,0x39,0x00,0x32,0x04,0x38,0x00,0x32,0x00,0x38,0x04,0x3e,0x04,0x48,0x04,0x35,0x00,0x2d,0x00,0x65,0x00,0x78,0x00,0x43,0x04,0x20,0x00,0x7e,0x00,0x71,0x04,0x13,0x04,0x46,0x04,0x22,0x00,0x40,0x00,0x64,0x00,0x24,0x00,0x29,0x00,0x0a,0x00,0x7a,0x00,0x31,0x00,0x66,0x00,0x40,0x00,0x58,0x04,0x11,0x00,0x33,0x00,0x20,0x00,0x78,0x04,0x42,0x00,0x2e,0x00,0x34,0x04,0x31,0x04,0x3a,0x04,0x17,0x00,0x20,0x00,0x64,0x00,0x63,0x04,0x48,0x00,0x34,0x04,0x19,0x00,0x6c,0x00,0x32,0x00,0x0a,0x00,0x43,0x00,0x3e,0x04,0x44,0x00,0x7c,0x04,0x4f,0x04,0x23,0x00,0x2d,0x00,0x4a,0x00,0x36,0x00,0x25,0x04,0x3d,0x00,0x33,0x00,0x56,0x00,0x77,0x00,0x38,0x00,0x20,0x00,0x7c,0x00,0x3f,0x00,0x2f,0x00,0x2d,0x00,0x33,0x00,0x34,0x00,0x73,0x04,0x21,0x00,0x2e,0x00,0x43,0x00,0x45,0x04,0x18,0x04,0x3f,0x04,0x2d,0x00,0x38,0x04,0x2f,0x04,0x17,0x00,0x77,0x04,0x35,0x04,0x01,0x04,0x29,0x00,0x20,0x00,0x49,0x04,0x2f,0x04,0x48,0x00,0x58,0x00,0x33,0x04,0x36,0x00,0x33,0x00,0x6a,0x04,0x4d,0x04,0x1e,0x00,0x28,0x04,0x38,0x04,0x41,0x00,0x42,0x04,0x3c,0x00,0x5a,0x00,0x39,0x00,0x32,0x00,0x5f,0x00,0x65,0x00,0x2d,0x00,0x34,0x00,0x3c,0x00,0x73,0x00,0x39,0x00,0x5c,0x00,0x0a,0x00,0x20,0x00,0x54,0x00,0x74,0x00,0x35,0x00,0x39,0x04,0x45,0x00,0x35,0x00,0x5f,0x00,0x49,0x04,0x3f,0x00,0x53,0x00,0x33,0x04,0x19,0x00,0x35,0x00,0x51,0x04,0x18,0x00,0x0a,0x00,0x54,0x00,0x20,0x00,0x0a,0x00,0x2e,0x00,0x2a,0x04,0x12,0x00,0x53,0x00,0x0a,0x00,0x58,0x00,0x35,0x00,0x65,0x00,0x33,0x00,0x76,0x00,0x77,0x00,0x2e,0x00,0x39,0x00,0x38,0x00,0x7d,0x00,0x38,0x00,0x5d,0x00,0x41,0x00,0x5f,0x04,0x4a,0x00,0x39,0x00,0x47,0x00,0x63,0x00,0x28,0x00,0x6a,0x04,0x44,0x00,0x59,0x00,0x22,0x00,0x3a,0x00,0x5c,0x00,0x38,0x04,0x4f,0x00,0x39,0x00,0x64,0x00,0x4a,0x00,0x20
};
//8->8

char bin2[]={
0x34,0x6d,0x33,0x3f,0x2c,0x28,0x57,0x52,0x33,0x36,0x48,0x1b,0x29,0x34,0x75,0x65,0x67,0x1b,0x40,0x41,0x6a,0x33,0x37,0x4b,0x2c,0x64,0x1b,0x2f,0x23,0x36,0x6f,0x63,0x38,0x35,0x32,0x11,0x38,0x38,0x2e,0x63,0x6d,0x34,0x44,0x78,0x67,0x46,0x2c,0x0a,0x61,0x2c,0x26,0x37,0x5a,0x20,0x6c,0x33,0x33,0x35,0x1b,0x2f,0x6d,0x30,0x72,0x69,0x6b,0x02,0x3a,0x27,0x1b,0x3d,0x36,0x21,0x37,0x0a,0x6a,0x23,0x4d,0x22,0x1b,0x14,0x36,0x66,0x44,0x1b,0x3d,0x35,0x2d,0x36,0x43,0x54,0x63,0x2d,0x33,0x2a,0x6c,0x43,0x22,0x3a,0x4f,0x32,0x23,0x36,0x0a,0x2a,0x02,0x51,0x6a,0x2e,0x71,0x0a,0x2b,0x0a,0x31,0x1b,0x14,0x1b,0x3e,0x27,0x02,0x38,0x46,0x4d,0x37,0x20,0x54,0x1b,0x2f,0x2f,0x27,0x35,0x36,0x11,0x35,0x1b,0x40,0x27,0x79,0x6b,0x31,0x70,0x30,0x32,0x33,0x4e,0x5a,0x4f,0x38,0x71,0x27,0x0a,0x30,0x71,0x4a,0x1b,0x2f,0x6c,0x27,0x39,0x2c,0x67,0x27,0x42,0x1b,0x2f,0x53,0x39,0x69,0x3b,0x30,0x4e,0x30,0x28,0x36,0x31,0x4d,0x52,0x38,0x0a,0x29,0x32,0x2d,0x4d,0x29,0x63,0x35,0x33,0x39,0x65,0x33,0x39,0x1b,0x2f,0x3b,0x21,0x32,0x3b,0x3d,0x39,0x45,0x2a,0x29,0x34,0x42,0x37,0x20,0x1b,0x40,0x1b,0x2f,0x4f,0x69,0x53,0x0a,0x63,0x48,0x62,0x22,0x39,0x0a,0x30,0x62,0x70,0x36,0x31,0x3a,0x32,0x02,0x3c,0x6c,0x1b,0x3e,0x1b,0x29,0x25,0x36,0x35,0x39,0x2d,0x22,0x3b,0x34,0x37,0x33,0x38,0x41,0x20,0x55,0x1b,0x29,0x68,0x6c,0x33,0x21,0x37,0x30,0x29,0x39,0x34,0x31,0x38,0x49,0x3c,0x3f,0x29,0x35,0x30,0x36,0x1b,0x14,0x4e,0x30,0x2d,0x79,0x36,0x7a,0x38,0x30,0x1b,0x14,0x77,0x1b,0x3d,0x45,0x3c,0x0a,0x31,0x79,0x36,0x2e,0x5a,0x1b,0x28,0x1b,0x3e,0x21,0x20,0x35,0x32,0x11,0x20,0x63,0x4c,0x1b,0x2f,0x30,0x23,0x0a,0x31,0x55,0x0a,0x32,0x34,0x37,0x35,0x2b,0x00,0x7a,0x21,0x39,0x65,0x33,0x2c,0x23,0x4c,0x37,0x69,0x1b,0x3d,0x68,0x66,0x7a,0x44,0x1b,0x28,0x1b,0x3e,0x25,0x3d,0x46,0x1b,0x14,0x38,0x32,0x3c,0x11,0x30,0x32,0x2d,0x2c,0x6c,0x6b,0x48,0x33,0x72,0x30,0x2c,0x68,0x2f,0x7a,0x38,0x66,0x35,0x5a,0x6c,0x38,0x33,0x3c,0x35,0x6f,0x3c,0x3e,0x4c,0x29,0x67,0x33,0x71,0x79,0x33,0x55,0x23,0x61,0x23,0x02,0x66,0x21,0x34,0x35,0x58,0x28,0x31,0x1b,0x3d,0x2c,0x30,0x4b,0x67,0x41,0x1b,0x3e,0x37,0x3d,0x34,0x50,0x45,0x48,0x6f,0x6b,0x30,0x59,0x33,0x3b,0x21,0x36,0x26,0x3a,0x54,0x2f,0x45,0x0a,0x37,0x72,0x34,0x36,0x26,0x42,0x1b,0x3d,0x31,0x54,0x56,0x32,0x3d,0x6d,0x39,0x39,0x38,0x37,0x1b,0x28,0x2d,0x66,0x39,0x71,0x36,0x31,0x4c,0x39,0x3a,0x3d,0x35,0x49,0x32,0x30,0x69,0x37,0x4b,0x41,0x54,0x39,0x48,0x55,0x02,0x70,0x34,0x22,0x20,0x3b,0x37,0x1b,0x29,0x62,0x39,0x4f,0x49,0x53,0x35,0x21,0x0a,0x32,0x34,0x0a,0x34,0x67,0x30,0x34,0x28,0x72,0x3f,0x66,0x33,0x51,0x57,0x4b,0x20,0x00,0x76,0x39,0x62,0x3f,0x45,0x68,0x2b,0x2d,0x30,0x35,0x3c,0x6d,0x34,0x31,0x32,0x20,0x66,0x61,0x3b,0x3b,0x6c,0x30,0x30,0x6e,0x38,0x65,0x38,0x37,0x3f,0x32,0x4e,0x20,0x77,0x0a,0x20,0x31,0x27,0x6c,0x39,0x20,0x30,0x79,0x52,0x79,0x4e,0x7a,0x34,0x50,0x55,0x72,0x38,0x1b,0x29,0x34,0x35,0x30,0x6f,0x1b,0x2f,0x77,0x3e,0x69,0x1b,0x3c,0x21,0x37,0x6a,0x35,0x2d,0x23,0x41,0x51,0x65,0x22,0x1b,0x14,0x23,0x34,0x20,0x37,0x51,0x47,0x47,0x43,0x3b,0x2e,0x22,0x20,0x37,0x32,0x38,0x1b,0x3d,0x1b,0x29,0x36,0x26,0x29,0x1b,0x29,0x36,0x1b,0x3c,0x38,0x1b,0x3c,0x2f,0x0a,0x0a,0x1b,0x28,0x32,0x38,0x6d,0x26,0x28,0x0a,0x31,0x38,0x53,0x32,0x31,0x29,0x70,0x33,0x31,0x45,0x72,0x32,0x1b,0x2f,0x33,0x02,0x48,0x39,0x3d,0x34,0x0a,0x30,0x37,0x45,0x76,0x63,0x36,0x66,0x11,0x6a,0x27,0x21,0x30,0x79,0x28,0x25,0x5a,0x3f,0x63,0x2b,0x22,0x37,0x34,0x4a,0x3a,0x37,0x34,0x3b,0x38,0x72,0x6c,0x75,0x68,0x73,0x55,0x39,0x36,0x72,0x61,0x2c,0x20,0x66,0x43,0x6e,0x26,0x35,0x31,0x5a,0x39,0x1b,0x40,0x75,0x39,0x37,0x34,0x38,0x26,0x31,0x35,0x30,0x32,0x50,0x1b,0x3c,0x34,0x30,0x35,0x4b,0x64,0x31,0x35,0x20,0x46,0x35,0x31,0x35,0x46,0x33,0x5a,0x76,0x36,0x1b,0x40,0x44,0x77,0x3c,0x3b,0x25,0x37,0x33,0x25,0x2a,0x25,0x26,0x4c,0x39,0x6f,0x20,0x11,0x50,0x20,0x5a,0x39,0x2a,0x3f,0x47,0x33,0x2c,0x11,0x34,0x34,0x63,0x0a,0x5a,0x33,0x2e,0x2c,0x32,0x39,0x59,0x3d,0x31,0x30,0x1b,0x3e,0x31,0x73,0x11,0x33,0x31,0x36,0x71,0x34,0x47,0x27,0x1b,0x28,0x6f,0x37,0x3e,0x1b,0x28,0x2b,0x30,0x3f,0x35,0x32,0x43,0x35,0x3a,0x34,0x3f,0x34,0x75,0x4c,0x2d,0x1b,0x14,0x33,0x79,0x72,0x56,0x55,0x32,0x79,0x2d,0x20,0x31,0x1b,0x14,0x22,0x1b,0x3e,0x56,0x1b,0x40,0x38,0x1b,0x2f,0x30,0x2a,0x31,0x32,0x6e,0x44,0x2c,0x33,0x38,0x30,0x1b,0x14,0x38,0x1b,0x29,0x31,0x34,0x36,0x4b,0x55,0x44,0x31,0x32,0x6d,0x2b,0x4f,0x35,0x4b,0x34,0x59,0x38,0x5a,0x4a,0x22,0x1b,0x2f
};
//240->0


char bin3[]={
0x23,0x6e,0x4f,0x61,0x43,0x4b,0x23,0x23,0x6e,0x4f,0x61,0x63,0x4b,0x23,0x23,0x64,0x45,0x66,0x20,0x30,0x23,0x23,0x74,0x45,0x4d,0x70,0x6c,0x61,0x74,0x45,0x3d,0x54,0x31,0x23,0x20,0x1b,0x28,0x11,0x6e,0x41,0x6d,0x65,0x11,0x1b,0x29,0x3d,0x31,0x31,0x31,0x20,0x6f,0x1b,0x3c,0x11,0x57,0x33,0x11,0x3a,0x36,0x2a,0x36,0x22,0x1b,0x2f,0x48,0x11,0x36,0x72,0x0a,0x35,0x64,0x0a,0x39,0x45,0x75,0x36,0x48,0x36,0x35,0x3c,0x35,0x78,0x2d,0x1b,0x40,0x73,0x1b,0x3d,0x35,0x36,0x47,0x27,0x71,0x4b,0x0a,0x70,0x58,0x46,0x33,0x72,0x34,0x4f,0x45,0x3f,0x4c,0x4e,0x48,0x1b,0x3c,0x32,0x4c,0x62,0x38,0x39,0x35,0x20,0x26,0x2b,0x2d,0x0a,0x37,0x29,0x36,0x54,0x1b,0x14,0x4d,0x58,0x66,0x4e,0x41,0x36,0x0a,0x2a,0x48,0x61,0x58,0x21,0x35,0x4c,0x75,0x1b,0x3d,0x1b,0x29,0x7a,0x2d,0x30,0x33,0x1b,0x28,0x00,0x66,0x31,0x57,0x55,0x1b,0x3e,0x37,0x37,0x4f,0x72,0x50,0x6f,0x39,0x35,0x43,0x3a,0x6a,0x2a,0x4d,0x1b,0x3c,0x1b,0x40,0x35,0x28,0x75,0x47,0x31,0x38,0x45,0x2a,0x35,0x46,0x57,0x29,0x41,0x02,0x35,0x31,0x35,0x20,0x1b,0x3e,0x39,0x33,0x72,0x0a,0x6f,0x55,0x65,0x44,0x39,0x62,0x39,0x36,0x79,0x39,0x35,0x34,0x38,0x67,0x1b,0x14,0x20,0x34,0x36,0x39,0x32,0x4e,0x3b,0x28,0x2e,0x36,0x38,0x23,0x2d,0x39,0x46,0x69,0x39,0x34,0x11,0x32,0x34,0x6f,0x6c,0x52,0x35,0x20,0x30,0x31,0x0a,0x41,0x1b,0x28,0x11,0x30,0x0a,0x33,0x3d,0x22,0x00,0x2f,0x0a,0x2d,0x30,0x75,0x25,0x1b,0x2f,0x26,0x27,0x30,0x5a,0x30,0x37,0x6f,0x39,0x4c,0x21,0x22,0x47,0x44,0x4f,0x55,0x36,0x44,0x31,0x4f,0x30,0x59,0x3f,0x00,0x1b,0x28,0x3d,0x0a,0x32,0x35,0x33,0x66,0x34,0x02,0x54,0x75,0x51,0x3c,0x52,0x34,0x74,0x7a,0x2a,0x76,0x1b,0x14,0x2c,0x0a,0x41,0x21,0x33,0x39,0x35,0x38,0x31,0x1b,0x3e,0x31,0x35,0x66,0x49,0x47,0x21,0x31,0x73,0x31,0x61,0x30,0x33,0x45,0x66,0x38,0x79,0x27,0x6a,0x38,0x1b,0x14,0x2c,0x3c,0x2d,0x00,0x0a,0x56,0x2c,0x20,0x78,0x34,0x45,0x31,0x3a,0x5a,0x1b,0x2f,0x31,0x78,0x20,0x3a,0x28,0x6f,0x1b,0x29,0x37,0x29,0x58,0x3f,0x1b,0x3d,0x70,0x77,0x30,0x36,0x34,0x35,0x0a,0x75,0x59,0x49,0x34,0x20,0x3e,0x4c,0x70,0x3f,0x20,0x79,0x2c,0x6b,0x30,0x26,0x37,0x4c,0x3c,0x3a,0x20,0x35,0x31,0x11,0x0a,0x42,0x32,0x39,0x2d,0x32,0x1b,0x40,0x2a,0x31,0x4f,0x26,0x29,0x0a,0x32,0x32,0x23,0x1b,0x29,0x30,0x21,0x54,0x50,0x37,0x20,0x79,0x4b,0x34,0x34,0x35,0x35,0x34,0x0a,0x37,0x32,0x37,0x29,0x02,0x33,0x1b,0x3d,0x55,0x66,0x0a,0x11,0x49,0x6d,0x37,0x70,0x6d,0x44,0x2a,0x3d,0x20,0x33,0x66,0x0a,0x35,0x4e,0x32,0x39,0x75,0x1b,0x28,0x26,0x3b,0x20,0x3d,0x1b,0x28,0x56,0x20,0x1b,0x40,0x6a,0x38,0x2e,0x6f,0x50,0x54,0x3f,0x27,0x2c,0x30,0x71,0x0a,0x69,0x3d,0x3f,0x67,0x2c,0x42,0x74,0x66,0x34,0x61,0x36,0x0a,0x3f,0x27,0x2f,0x77,0x6c,0x43,0x6b,0x36,0x37,0x23,0x33,0x52,0x32,0x3f,0x31,0x1b,0x3e,0x6c,0x46,0x4d,0x55,0x35,0x49,0x45,0x53,0x2b,0x28,0x6f,0x1b,0x2f,0x32,0x1b,0x14,0x45,0x20,0x38,0x3d,0x39,0x36,0x78,0x2a,0x64,0x33,0x57,0x65,0x39,0x41,0x36,0x4e,0x61,0x35,0x38,0x39,0x37,0x28,0x1b,0x28,0x00,0x1b,0x2f,0x37,0x71,0x37,0x29,0x0a,0x79,0x1b,0x3c,0x30,0x53,0x75,0x21,0x33,0x55,0x69,0x22,0x6e,0x31,0x42,0x45,0x67,0x61,0x58,0x32,0x35,0x0a,0x33,0x56,0x1b,0x40,0x39,0x34,0x78,0x78,0x2f,0x31,0x1b,0x40,0x31,0x21,0x41,0x0a,0x33,0x22,0x39,0x1b,0x29,0x36,0x1b,0x40,0x1b,0x3e,0x39,0x30,0x6c,0x2d,0x58,0x1b,0x2f,0x3f,0x45,0x3a,0x50,0x30,0x2c,0x44,0x41,0x3e,0x21,0x37,0x57,0x3c,0x29,0x38,0x79,0x65,0x1b,0x29,0x1b,0x3c,0x51,0x20,0x30,0x48,0x39,0x4e,0x25,0x1b,0x2f,0x1b,0x3d,0x26,0x38,0x33,0x4e,0x75,0x0a,0x11,0x68,0x23,0x75,0x3b,0x30,0x00,0x49,0x72,0x44,0x35,0x3e,0x74,0x1b,0x3d,0x3f,0x38,0x32,0x38,0x02,0x30,0x2d,0x4f,0x02,0x67,0x4f,0x42,0x1b,0x28,0x69,0x56,0x30,0x1b,0x2f,0x26,0x20,0x1b,0x29,0x2c,0x33,0x1b,0x3c,0x31,0x43,0x34,0x46,0x62,0x38,0x74,0x32,0x1b,0x28,0x30,0x65,0x34,0x6d,0x3f,0x32,0x36,0x39,0x67,0x1b,0x29,0x45,0x34,0x31,0x29,0x2f,0x75,0x1b,0x3e,0x63,0x1b,0x29,0x21,0x34,0x31,0x69,0x0a,0x35,0x34,0x37,0x2e,0x43,0x58,0x31,0x2f,0x11,0x70
};
//240->0



char bin4[]={
0x39,0x2d,0x47,0x37,0x2b,0x38,0x3b,0x37,0x55,0x5a,0x33,0x6e,0x28,0x33,0x20,0x68,0x3c,0x40,0x40,0x3d,0x32,0x45,0x56,0x5c,0x40,0x72,0x3f,0x33,0x35,0x75,0x27,0x23,0x34,0x56,0x3b,0x7e,0x3d,0x23,0x39,0x74,0x56,0x2e,0x58,0x38,0x66,0x5f,0x33,0x30,0x32,0x39,0x74,0x59,0x68,0x34,0x7b,0x26,0x0a,0x2d,0x35,0x39,0x2b,0x2f,0x7c,0x7a,0x7c,0x3d,0x25,0x39,0x20,0x38,0x6b,0x0a,0x40,0x63,0x3b,0x27,0x5a,0x2f,0x2a,0x78,0x36,0x34,0x6c,0x32,0x6a,0x27,0x76,0x2c,0x22,0x2d,0x2b,0x33,0x5e,0x2c,0x30,0x0a,0x35,0x58,0x34,0x4e,0x49,0x38,0x6b,0x34,0x3d,0x5e,0x58,0x39,0x5a,0x34,0x0a,0x48,0x26,0x61,0x20,0x40,0x26,0x32,0x5d,0x5e,0x7e,0x31,0x33,0x6c,0x69,0x43,0x45,0x28,0x20,0x38,0x52,0x2f,0x32,0x38,0x7c,0x5d,0x7d,0x36,0x75,0x2a,0x24,0x3a,0x6b,0x63,0x29,0x25,0x31,0x2d,0x28,0x68,0x0a,0x38,0x38,0x31,0x38,0x79,0x3f,0x31,0x55,0x35,0x79,0x59,0x62,0x68,0x55,0x5c,0x2a,0x62,0x30,0x36,0x52,0x36,0x2c,0x34,0x27,0x69,0x39,0x2b,0x25,0x32,0x78,0x75,0x61,0x56,0x6c,0x20,0x22,0x65,0x52,0x32,0x2a,0x32,0x31,0x35,0x34,0x56,0x2f,0x0a,0x21,0x33,0x37,0x7c,0x30,0x7c,0x0a,0x2a,0x30,0x2a,0x3d,0x76,0x67,0x36,0x39,0x5c,0x0a,0x37,0x0a,0x6f,0x20,0x67,0x69,0x50,0x2b,0x4d,0x28,0x0a,0x7c,0x20,0x7e,0x20,0x3e,0x40,0x58,0x71,0x26,0x0a,0x3f,0x3c,0x37,0x39,0x2f,0x6c,0x2c,0x30,0x23,0x38,0x65,0x35,0x38,0x5d,0x33,0x65,0x37,0x45,0x71,0x2e,0x21,0x25,0x21,0x31,0x6f,0x37,0x39,0x40,0x23,0x31,0x34,0x3f,0x0a,0x39,0x36,0x75,0x34,0x44,0x64,0x53,0x36,0x38,0x30,0x3b,0x66,0x35,0x0a,0x0a,0x35,0x55,0x28,0x5b,0x47,0x2a,0x35,0x3e,0x6b,0x33,0x36,0x6f,0x25,0x34,0x20,0x75,0x34,0x33,0x32,0x2f,0x7c,0x21,0x59,0x77,0x3b,0x0a,0x37,0x73,0x0a,0x7b,0x30,0x38,0x63,0x38,0x51,0x20,0x32,0x0a,0x29,0x20,0x22,0x6f,0x7e,0x3f,0x7e,0x49,0x26,0x6c,0x2c,0x37,0x30,0x0a,0x5c,0x79,0x31,0x0a,0x5f,0x33,0x4d,0x31,0x20,0x3a,0x4f,0x0a,0x20,0x32,0x76,0x36,0x45,0x32,0x4d,0x31,0x20,0x34,0x2e,0x3d,0x2a,0x2f,0x45,0x32,0x4f,0x76,0x37,0x36,0x78,0x59,0x41,0x62,0x38,0x66,0x23,0x32,0x67,0x70,0x67,0x4f,0x32,0x39,0x34,0x21,0x39,0x3a,0x34,0x38,0x76,0x74,0x5d,0x2e,0x33,0x7c,0x20,0x57,0x32,0x7a,0x32,0x38,0x69,0x35,0x37,0x0a,0x40,0x5c,0x33,0x7b,0x49,0x5b,0x31,0x74
};
//0->0



char bin5[]={
0x23,0x64,0x65,0x66,0x20,0x2d,0x31,0x23,0x30,0x67,0x68,0x5f,0x34,0x2b,0x4f,0x76,0x26,0x40,0x31,0x30,0x24,0x31,0x51,0x78,0x36,0x39,0x67,0x32,0x7c,0x53,0x30,0x66,0x22,0x32,0x28,0x30,0x3d,0x3b,0x21,0x38,0x4d,0x3d,0x0a,0x30,0x42,0x0a,0x50,0x32,0x39,0x2c,0x63,0x78,0x36,0x31,0x20,0x3e,0x3e,0x6b,0x20,0x2e,0x2b,0x26,0x55,0x2c,0x38,0x30,0x34,0x37,0x6c,0x38,0x4f,0x30,0x6d,0x39,0x5b,0x38,0x30,0x64,0x34,0x37,0x23,0x51,0x2a,0x39,0x0a,0x39,0x4d,0x7d,0x33,0x32,0x2f,0x54,0x3c,0x2c,0x36,0x2d,0x46,0x39,0x67,0x7c,0x62,0x74,0x4b,0x39,0x7c,0x25,0x38,0x6d,0x78,0x72,0x5e,0x35,0x2c,0x7c,0x0a,0x26,0x25,0x35,0x58,0x45,0x62,0x6d,0x32,0x20,0x71,0x4b,0x50,0x20,0x21,0x35,0x42,0x3a,0x61,0x52,0x0a,0x33,0x72,0x3f,0x20,0x7d,0x33,0x35,0x56,0x35,0x27,0x33,0x5b,0x22,0x3e,0x79,0x57,0x4d,0x5a,0x32,0x35,0x0a,0x32,0x24,0x5a,0x49,0x29,0x38,0x33,0x37,0x37,0x50,0x3e,0x20,0x2d,0x7b,0x41,0x2a,0x69,0x37,0x77,0x3b,0x2f,0x2d,0x7e,0x37,0x0a,0x6b,0x26,0x70,0x33,0x33,0x37,0x2a,0x46,0x2a,0x44,0x28,0x33,0x2d,0x44,0x48,0x48,0x2e,0x29,0x70,0x40,0x4a,0x38,0x6c,0x33,0x40,0x74,0x52,0x2b,0x3c,0x2c,0x2e,0x7c,0x38,0x4e,0x43,0x39,0x23,0x5b,0x63,0x5b,0x2c,0x75,0x62,0x36,0x72,0x39,0x58,0x33,0x5c,0x34,0x31,0x5a,0x4b,0x5f,0x39,0x30,0x38,0x34,0x3b,0x2e,0x31,0x24,0x4b,0x20,0x3f,0x6f,0x64,0x48,0x23,0x72,0x2d,0x30,0x34,0x34,0x36,0x30,0x2b,0x3f,0x20,0x36,0x40,0x52,0x2d,0x79,0x7b,0x43,0x53,0x3e,0x45,0x29,0x6f,0x30,0x64,0x5b,0x0a,0x5b,0x55,0x5f,0x57,0x2b,0x31,0x27,0x0a,0x33,0x27,0x6a,0x27,0x33,0x31,0x22,0x40,0x2e,0x46,0x54,0x31,0x38,0x3f,0x53,0x36,0x53,0x66,0x4b,0x64,0x2b,0x65,0x57,0x72,0x30,0x22,0x38,0x66,0x2f,0x20,0x37,0x5e,0x38,0x24,0x30,0x36,0x27,0x4e,0x0a,0x37,0x31,0x2e,0x30,0x3a,0x28,0x32,0x67,0x36,0x6e,0x54,0x32,0x4e,0x3a,0x2c,0x24,0x3c,0x21,0x39,0x70,0x39,0x38,0x0a,0x47,0x6e,0x5e,0x74,0x23,0x50,0x74,0x5e,0x7d,0x0a,0x20,0x6a,0x5b,0x61,0x29,0x4f,0x34,0x5f,0x4f,0x3d,0x29,0x33,0x37,0x3c,0x48,0x52,0x32,0x25,0x3d,0x79,0x35,0x23,0x26,0x34,0x5d,0x26,0x0a,0x50,0x4c,0x30,0x4e,0x74,0x3d,0x32,0x20,0x40,0x7b,0x23,0x23,0x38,0x2e,0x76,0x35,0x39,0x32,0x42,0x2a,0x65,0x37,0x5f,0x37,0x31,0x32,0x7e,0x23,0x31,0x70,0x31,0x36,0x2f,0x36,0x71,0x37,0x39,0x61,0x37,0x38,0x20,0x30,0x4d,0x20,0x6c,0x38,0x2e,0x34,0x28,0x35,0x38,0x34,0x3f,0x2a,0x2b,0x34,0x29,0x28,0x53,0x39,0x5c,0x44,0x5f,0x4f,0x34,0x32,0x2d,0x33,0x57,0x78,0x75,0x52,0x30,0x0a,0x36,0x70,0x33,0x35,0x43,0x33,0x5d,0x71,0x61,0x59,0x2c,0x25,0x51,0x52,0x39,0x63,0x6b,0x73,0x33,0x61,0x38,0x7e,0x0a,0x2f,0x54,0x56,0x64
};
//0->0

char bin6[]={
0x23,0x6e,0x6f,0x61,0x63,0x6b,0x3d,0x23,0x22,0x42,0x33,0x4d,0x50,0x37,0x32,0x4f,0x7a,0x32,0x6c,0x32,0x0a,0x31,0x75,0x74,0x31,0x47,0x6a,0x38,0x0a,0x0a,0x5c,0x36,0x3d,0x29,0x4e,0x29,0x5b,0x72,0x7e,0x7e,0x0a,0x34,0x66,0x30,0x71,0x56,0x39,0x7e,0x47,0x35,0x32,0x35,0x5d,0x39,0x23,0x62,0x3c,0x73,0x38,0x34,0x25,0x78,0x49,0x38,0x58,0x27,0x2d,0x38,0x23,0x37,0x23,0x6a,0x61,0x30,0x7b,0x5e,0x6d,0x33,0x21,0x32,0x45,0x6a,0x22,0x54,0x68,0x5d,0x39,0x68,0x71,0x26,0x75,0x79,0x3f,0x56,0x57,0x7e,0x34,0x34,0x2f,0x69,0x20,0x40,0x22,0x7d,0x7c,0x38,0x3d,0x34,0x39,0x0a,0x29,0x2c,0x0a,0x4d,0x32,0x41,0x54,0x37,0x52,0x3f,0x31,0x45,0x20,0x36,0x61,0x3e,0x3d,0x32,0x38,0x73,0x20,0x4e,0x7c,0x75,0x70,0x38,0x70,0x5c,0x39,0x40,0x30,0x36,0x7e,0x2c,0x33,0x78,0x77,0x38,0x4a,0x36,0x22,0x59,0x33,0x7d,0x33,0x2b,0x2a,0x20,0x22,0x33,0x6b,0x2f,0x45,0x38,0x37,0x32,0x65,0x35,0x77,0x64,0x32,0x36,0x28,0x43,0x74,0x2f,0x34,0x20,0x38,0x30,0x38,0x2d,0x21,0x38,0x20,0x56,0x45,0x31,0x2b,0x77,0x26,0x52,0x70,0x35,0x6c,0x31,0x7b,0x41,0x33,0x20,0x30,0x21,0x33,0x27,0x36,0x4f,0x28,0x72,0x78,0x26,0x0a,0x2a,0x5f,0x2b,0x37,0x35,0x20,0x36,0x30,0x3f,0x50,0x30,0x31,0x47,0x53,0x47,0x73,0x26,0x37,0x40,0x30,0x31,0x6c,0x37,0x25,0x4d,0x29,0x2a,0x34,0x37,0x2b,0x3b,0x37,0x34,0x57,0x24,0x5c,0x31,0x2e,0x20,0x35,0x20,0x34,0x25,0x30,0x36,0x28,0x36,0x44,0x20,0x27,0x7c,0x78,0x4b,0x33,0x36,0x69,0x67,0x5c,0x2a,0x32,0x5c,0x7e,0x34,0x61,0x67,0x39,0x20,0x50,0x62,0x4b,0x70,0x37,0x73,0x4a,0x20,0x42,0x31,0x45,0x68,0x31,0x79,0x76,0x26,0x77,0x3e,0x4d,0x0a,0x70,0x29,0x7a,0x69,0x2f,0x42,0x5f,0x30,0x74,0x3f,0x29,0x66,0x33,0x33,0x36,0x3d,0x71,0x32,0x36,0x69,0x72,0x73,0x21,0x7c,0x2e,0x0a,0x6d,0x32,0x22,0x35,0x23,0x35,0x58,0x36,0x35,0x7c,0x27,0x5e,0x33,0x56,0x5d,0x3e,0x45,0x30,0x6a,0x29,0x24,0x3b,0x48,0x2a,0x40,0x7b,0x2f,0x3c,0x56,0x31,0x59,0x6c,0x23,0x20,0x6f,0x20,0x50,0x0a,0x36,0x2b,0x36,0x5b,0x5d,0x0a,0x33,0x77,0x3a,0x44,0x6b,0x3a,0x36,0x38,0x5a,0x34,0x56,0x4d,0x25,0x39,0x5a,0x3c,0x32,0x39,0x33,0x3e,0x2a,0x20,0x20,0x6d,0x2e,0x38,0x37,0x6c,0x31,0x59,0x39,0x70,0x74,0x53,0x35,0x44,0x34,0x33,0x58,0x58,0x32,0x21,0x39,0x37,0x63,0x5f,0x37,0x67,0x30,0x2b,0x67,0x30,0x31,0x31,0x5f,0x31,0x36,0x40,0x3a,0x35,0x0a,0x71,0x35,0x32,0x39,0x37,0x66,0x40,0x3c,0x2e,0x28,0x35,0x33,0x4c,0x39,0x34,0x3c,0x31,0x75,0x35,0x34,0x38,0x59,0x35,0x24,0x27,0x2c,0x30,0x5c,0x23,0x39,0x61,0x34,0x75,0x22,0x2b,0x30,0x6c,0x79,0x73,0x55,0x6b,0x2a,0x3d,0x20,0x31,0x6b,0x2b,0x32,0x26,0x35,0x35,0x3c,0x39,0x52,0x32,0x26,0x64,0x6c,0x66,0x3b,0x25,0x31,0x42,0x2f,0x5c,0x31,0x42,0x31,0x30,0x31,0x2f,0x28,0x2c,0x2c,0x26,0x31,0x41,0x29,0x31,0x48,0x31,0x31,0x5d,0x32,0x2e,0x41,0x7d,0x38,0x34,0x47,0x32,0x70,0x5c,0x64,0x5b,0x74,0x30,0x71,0x0a,0x76,0x47,0x6d,0x24,0x25,0x59,0x6a,0x40,0x31,0x37,0x33,0x0a,0x2e,0x33,0x75,0x3d,0x38,0x26,0x0a,0x55,0x5c,0x7c,0x48,0x27,0x7c,0x25,0x23,0x33,0x7a,0x40,0x0a,0x5e,0x30,0x69,0x32,0x37,0x29,0x33,0x38,0x4d,0x21,0x78,0x2e,0x33,0x5b,0x2a,0x37,0x67,0x54,0x6a,0x22,0x70,0x34,0x41,0x34,0x4c,0x7e,0x35,0x36,0x2b,0x4f,0x68,0x33,0x20,0x35,0x7a,0x2c,0x56,0x58,0x44,0x34,0x7c,0x29,0x25,0x30,0x52,0x2c,0x36,0x76,0x36,0x36,0x59,0x5a,0x30,0x43,0x49,0x22,0x37,0x2e,0x36,0x33,0x71,0x35,0x35,0x4e,0x30,0x7e,0x30,0x37,0x47,0x6b,0x67,0x37,0x7e,0x40,0x2c,0x5f,0x45,0x38,0x61,0x35,0x7c,0x63,0x42,0x4b,0x34,0x33,0x2d,0x38,0x3d,0x35,0x63,0x32,0x22,0x6c,0x3f,0x27,0x7c,0x39,0x77,0x36,0x6b,0x3d,0x40,0x2a,0x28,0x4a,0x77,0x39,0x36,0x45,0x31,0x40,0x33,0x26,0x35,0x50,0x3a,0x41,0x34,0x68,0x5b,0x31,0x30,0x36,0x48,0x24,0x2c,0x6e,0x49,0x46,0x47,0x30,0x38,0x70,0x2c,0x0a,0x30,0x4e,0x46,0x38,0x52,0x3e,0x31,0x2b,0x77,0x39,0x24,0x64,0x39,0x34,0x49,0x5b,0x2c,0x20,0x6a,0x30,0x32,0x38,0x3d,0x35,0x20,0x3c,0x66,0x6c,0x33,0x49,0x32,0x30,0x20,0x4a,0x30,0x51,0x5c,0x33,0x37,0x39,0x2b,0x4a,0x5c,0x31,0x36,0x53,0x34,0x6a,0x33,0x37,0x7d,0x72,0x5f,0x67,0x7c,0x32,0x52,0x77,0x29,0x62,0x31,0x4d,0x5d,0x0a,0x25,0x40,0x40,0x26,0x4a,0x38,0x76,0x49,0x32,0x32,0x2a,0x39,0x58,0x36,0x43,0x3e,0x63,0x40,0x7e,0x36,0x38,0x31,0x31,0x75,0x49,0x58,0x0a,0x57,0x63,0x34,0x36,0x2a,0x21,0x2e,0x45,0x4b,0x20,0x33,0x34,0x0a,0x3d,0x34,0x7e,0x33,0x6c,0x2f,0x32,0x35,0x5b,0x48,0x37,0x33,0x0a,0x6a,0x5b,0x31,0x77,0x76,0x31,0x33,0x31,0x37,0x3e,0x48,0x2e,0x48,0x56,0x2d,0x2c,0x55,0x75,0x34,0x6f,0x28,0x51,0x75,0x21,0x2b,0x27,0x30,0x45,0x2a,0x39,0x7d,0x29,0x2b,0x7c,0x40,0x21,0x7c,0x33,0x35,0x20,0x77,0x78,0x4f,0x32,0x53,0x33,0x7d,0x33,0x5a,0x50,0x25,0x2f,0x2c,0x49,0x49,0x35,0x38,0x5e,0x21,0x32,0x51,0x45,0x37,0x24,0x34,0x36,0x41,0x32,0x49,0x33,0x79,0x63,0x42,0x39,0x71,0x7e,0x3c,0x40,0x3c,0x33,0x7e,0x52,0x67,0x38,0x21,0x7c,0x31,0x36,0x5c,0x32,0x39,0x37,0x3d,0x20,0x28,0x46,0x3b,0x0a,0x20,0x7c,0x35,0x5f,0x38,0x30,0x30,0x0a,0x30,0x66,0x2c,0x32,0x27,0x35,0x38,0x39
};
//0->0

char bin7[]={
0x23,0x4e,0x6f,0x61,0x43,0x6b,0x23,0x75,0x34,0x33,0x35,0x37,0x0a,0x7a,0x2a,0x37,0x57,0x31,0x3e,0x43,0x34,0x4b,0x6d,0x4c,0x25,0x36,0x21,0x32,0x2a,0x7d,0x78,0x2d,0x54,0x36,0x23,0x3d,0x40,0x32,0x29,0x3a,0x34,0x70,0x50,0x32,0x33,0x30,0x31,0x35,0x76,0x22,0x0a,0x62,0x47,0x5e,0x39,0x32,0x4e,0x32,0x3e,0x3c,0x35,0x67,0x30,0x4e,0x2e,0x35,0x20,0x31,0x5c,0x36,0x30,0x5b,0x24,0x48,0x37,0x34,0x20,0x26,0x31,0x43,0x5c,0x36,0x26,0x33,0x34,0x20,0x20,0x36,0x6a,0x5b,0x3d,0x62,0x79,0x45,0x33,0x30,0x39,0x39,0x44,0x30,0x30,0x41,0x30,0x54,0x32,0x2c,0x30,0x5e,0x34,0x2f,0x2f,0x5d,0x3c,0x34,0x5d,0x46,0x29,0x61,0x3f,0x65,0x40,0x74,0x4f,0x2b,0x46,0x3e,0x38,0x30,0x5b,0x75,0x3a,0x34,0x7e,0x20,0x30,0x7e,0x2d,0x64,0x7e,0x2f,0x20,0x5e,0x5a,0x48,0x5e,0x38,0x24,0x7c,0x49,0x30,0x7c,0x36,0x7d,0x5c,0x23,0x47,0x32,0x65,0x23,0x30,0x32,0x30,0x4a,0x38,0x74,0x62,0x6d,0x27,0x31,0x20,0x34,0x32,0x50,0x34,0x0a,0x56,0x46,0x5c,0x23,0x7d,0x59,0x30,0x2e,0x20,0x34,0x49,0x31,0x37,0x37,0x56,0x34,0x39,0x2f,0x39,0x39,0x22,0x38,0x7b,0x23,0x2a,0x2d,0x2d,0x74,0x6d,0x22,0x46,0x31,0x79,0x7e,0x2b,0x4e,0x7a,0x20,0x33,0x54,0x2b,0x5e,0x0a,0x31,0x2f,0x75,0x5d,0x6c,0x4e,0x50,0x30,0x28,0x5c,0x5b,0x4d,0x31,0x5d,0x21,0x44,0x38,0x50,0x22,0x37,0x34,0x2d,0x7e,0x72,0x73,0x25,0x36,0x35,0x54,0x39,0x37,0x69,0x4e,0x5d,0x6e,0x31,0x73,0x20,0x35,0x2d,0x56,0x74,0x22,0x48,0x7e,0x41,0x38,0x5b,0x24,0x36,0x20,0x30,0x42,0x32,0x3d,0x39,0x4f,0x38,0x5e,0x31,0x57,0x38,0x38,0x39,0x30,0x36,0x3b,0x28,0x5c,0x50,0x57,0x7d,0x2d,0x68,0x32,0x42,0x74,0x26,0x27,0x3e,0x36,0x29,0x7c,0x30,0x3a,0x6d,0x7b,0x3a,0x3d,0x7e,0x49,0x48,0x35,0x32,0x7a,0x41,0x20,0x61,0x5d,0x59,0x27,0x20,0x37,0x3a,0x39,0x6a,0x36,0x35,0x5b,0x52,0x70,0x5a,0x31,0x20,0x35,0x2e,0x46,0x32,0x68,0x36,0x31,0x49,0x74,0x20,0x39,0x2f,0x2c,0x2f,0x25,0x68,0x39,0x20,0x5b,0x26,0x31,0x31,0x3d,0x43,0x30,0x2d,0x34,0x2c,0x25,0x35,0x45,0x0a,0x0a,0x34,0x32,0x5d,0x4f,0x20,0x75,0x7c,0x3d,0x20,0x31,0x37,0x2f,0x6d,0x31,0x0a,0x47,0x23,0x6b,0x7c,0x20,0x30,0x0a,0x2e,0x33,0x30,0x23,0x39,0x7c,0x39,0x7e,0x36,0x20,0x38,0x30,0x20,0x4c,0x7d,0x4d,0x70,0x3b,0x25,0x4e,0x35,0x7e,0x33,0x5b,0x4f,0x38,0x71,0x39,0x6f,0x42,0x73,0x4c,0x33,0x24,0x41,0x20,0x40,0x2e,0x31,0x0a,0x3e,0x4d,0x65,0x20,0x52,0x53,0x3d,0x6c,0x39,0x38,0x22,0x55,0x21,0x30,0x3e,0x62,0x43,0x29,0x39,0x4d,0x37,0x79,0x2d,0x20,0x34,0x72,0x3f,0x30,0x73,0x38,0x4b,0x37,0x32,0x5f,0x31,0x66,0x3e,0x32,0x34,0x6c,0x39,0x24,0x33,0x27,0x38,0x34,0x34,0x0a,0x33,0x3f,0x35,0x3b,0x52,0x37,0x28,0x30,0x21,0x77,0x29,0x23,0x72,0x44,0x20,0x2c,0x6e,0x6f,0x34,0x77,0x21,0x3f,0x33,0x32,0x34,0x39,0x70,0x32,0x30,0x67,0x75,0x5b,0x3b,0x35,0x25,0x67,0x74,0x20,0x37,0x24,0x36,0x6c,0x7d,0x39,0x30,0x44,0x36,0x39,0x3e,0x4c,0x7c,0x6a,0x2e,0x39,0x34,0x61,0x52,0x61,0x35,0x30,0x64,0x33,0x73,0x38,0x72,0x31,0x23,0x25,0x5f,0x40,0x34,0x3b,0x20,0x0a,0x4d,0x33,0x6e,0x56,0x39,0x31,0x54,0x45,0x35,0x28,0x26,0x59,0x6a,0x44,0x0a,0x3a,0x40,0x37,0x5c,0x28,0x20,0x34,0x54,0x24,0x35,0x21,0x42,0x40,0x36,0x40,0x53,0x38,0x35,0x33,0x23,0x33,0x20,0x52,0x35,0x31,0x37,0x22,0x4c,0x75,0x34,0x2e,0x3f,0x57,0x33,0x22,0x68,0x39,0x38,0x73,0x67,0x32,0x28,0x6a,0x31,0x57,0x36,0x30,0x33,0x67,0x0a,0x31,0x7d,0x32,0x38,0x33,0x7a,0x52,0x65,0x37,0x53,0x61,0x33,0x4d,0x26,0x20,0x48,0x36,0x58,0x65,0x31,0x31,0x32,0x6a,0x35,0x3e,0x32,0x33,0x3d,0x5e,0x5c,0x4e,0x32,0x46,0x5e,0x34,0x46,0x32,0x32,0x75,0x36,0x2c,0x26,0x37,0x29,0x78,0x44,0x2d,0x20,0x5c,0x31,0x36,0x22,0x4c,0x35,0x65,0x79,0x4f,0x33,0x66,0x2d,0x38,0x3a,0x3a,0x47,0x53,0x36,0x61,0x47,0x3a,0x23,0x3c,0x7c,0x33,0x5f,0x31,0x23,0x35,0x3d,0x75,0x36,0x7b,0x67,0x7c,0x4f,0x7c,0x33,0x6c,0x3b,0x4f,0x32,0x39,0x55,0x37,0x3f,0x2e,0x37,0x79,0x31,0x59,0x32,0x26,0x30,0x42,0x37,0x3b,0x68,0x5c,0x66,0x78,0x20,0x7a,0x36,0x2b,0x38,0x7e,0x54,0x35,0x7e,0x34,0x3d,0x3a,0x73,0x7e,0x37,0x75,0x47,0x35,0x38,0x22,0x76,0x3a,0x36,0x22,0x5c,0x42,0x62,0x4c,0x7e,0x77,0x49,0x55,0x5f,0x57,0x20,0x36,0x72,0x30,0x34,0x37,0x2b,0x64,0x78,0x30,0x32,0x33,0x65,0x39,0x36,0x2e,0x77,0x30,0x31,0x2a,0x41,0x4c,0x31,0x38,0x6f,0x38,0x42,0x36,0x3b,0x5d,0x43,0x74,0x38,0x38,0x73,0x29,0x32,0x3c,0x36,0x58,0x35,0x2e,0x65,0x27,0x21,0x2d,0x54,0x31,0x4e,0x38,0x49,0x39,0x74,0x32,0x30,0x3c,0x25,0x76,0x34,0x35,0x3c,0x38,0x68,0x4f,0x68,0x40,0x79,0x6e,0x29,0x35,0x30,0x71,0x26,0x34,0x22,0x33,0x32,0x4b,0x6e,0x2d,0x34,0x7d,0x58,0x52,0x33,0x64,0x4e,0x48,0x3b,0x0a,0x2a,0x31,0x38,0x36,0x74,0x3c,0x7a,0x32,0x37,0x22,0x3f,0x74,0x35,0x5e,0x38,0x2a,0x5e,0x73,0x48,0x38,0x35,0x57,0x6f,0x6a,0x7d,0x22,0x74,0x2d,0x2c,0x29,0x25,0x6c,0x34,0x34,0x37,0x5c,0x39,0x39,0x6a,0x71,0x58,0x37,0x2e,0x0a,0x61,0x22,0x3b,0x31,0x33,0x32,0x38,0x32,0x5d,0x77,0x3d,0x32,0x38,0x32,0x3d,0x0a,0x3f,0x47,0x41,0x2b,0x6b,0x6f,0x40,0x34,0x20,0x37,0x33,0x6c,0x20,0x33,0x58,0x35,0x32,0x3a,0x21,0x36,0x24,0x32,0x7e,0x2d,0x31,0x39,0x39,0x65,0x64,0x5f,0x32,0x32,0x2c,0x29,0x49,0x29,0x21,0x73,0x37,0x58,0x33,0x30,0x58,0x37,0x28,0x64,0x5b,0x3b,0x59,0x37,0x35,0x37,0x65,0x2c,0x27,0x39,0x33,0x2c,0x3e,0x37,0x2a,0x7c,0x3b,0x68,0x59,0x3e,0x4e,0x63,0x31,0x31,0x7e,0x31,0x53,0x23,0x33,0x7c
};
//0->0

char bin8[]={
0x23,0x68,0x69,0x64,0x65,0x32,0x23,0x5c,0x32,0x7a,0x40,0x57,0x7c,0x29,0x0a,0x0a,0x64,0x65,0x62,0x37,0x4d,0x4e,0x38,0x33,0x25,0x73,0x36,0x3f,0x34,0x3d,0x32,0x3f,0x34,0x6c,0x7b,0x4f,0x7d,0x6b,0x21,0x6f,0x3e,0x5c,0x2f,0x7d,0x64,0x26,0x29,0x69,0x30,0x27,0x5c,0x64,0x20,0x3c,0x63,0x7b,0x41,0x4f,0x2a,0x6f,0x3a,0x2b,0x29,0x6a,0x46,0x26,0x3a,0x3b,0x31,0x5f,0x35,0x37,0x30,0x21,0x3b,0x34,0x39,0x32,0x2f,0x30,0x2a,0x2a,0x38,0x7a,0x32,0x78,0x3f,0x32,0x34,0x39,0x39,0x3e,0x5d,0x7d,0x35,0x2c,0x39,0x30,0x47,0x32,0x39,0x31,0x75,0x61,0x24,0x6a,0x2d,0x36,0x20,0x39,0x31,0x56,0x50,0x70,0x21,0x64,0x7b,0x7d,0x35,0x5d,0x49,0x31,0x38,0x20,0x23,0x51,0x73,0x35,0x2d,0x33,0x31,0x28,0x33,0x3b,0x0a,0x75,0x31,0x3f,0x3e,0x7c,0x0a,0x34,0x45,0x74,0x6b,0x63,0x26,0x2a,0x43,0x25,0x20,0x2a,0x39,0x37,0x37,0x40,0x52,0x48,0x34,0x5a,0x44,0x24,0x64,0x36,0x54,0x32,0x54,0x72,0x34,0x5a,0x23,0x3a,0x27,0x37,0x5e,0x2e,0x21,0x61,0x36,0x4d,0x38,0x20,0x7e,0x51,0x39,0x29,0x26,0x62,0x50,0x7d,0x35,0x30,0x36,0x0a,0x30,0x25,0x31,0x75,0x62,0x31,0x33,0x2f
};

Test tst[]={
  {bin1,sizeof(bin1),8,8},
  {bin2,sizeof(bin2),240,0},
  {bin3,sizeof(bin3),240,0},
  {bin4,sizeof(bin4),0,0},
  {bin5,sizeof(bin5),0,0},
  {bin6,sizeof(bin6),0,0},
  {bin7,sizeof(bin7),0,0},
  {bin8,sizeof(bin8),0,0},
};


int main(int argc, char** argv)
{
  smsc::util::regexp::RegExp::InitLocale();
  const char *locales="en_us, en_gb, ru_ru";
  const char *defloc="en_us";

  ResourceManager::init(locales,defloc);
  /*
  {
    string s=ResourceManager::getInstance()->getString("ru_ru","profiler.msgReportFull");
    printf("res=%s\n",s.c_str());
  }
*/
  {
    OutputFormatter* f=new OutputFormatter("$$string import=abonent$$:$$int32 import=status$$,$$int32 import=encoding$$,$$string import=msc$$");

    ReceiptGetAdapter ga;
    ContextEnvironment ca;
    ca.exportStr("abonent","x");
    ca.exportInt("status",1);
    ca.exportInt("encoding",1);
    ca.exportStr("msc","msc");
    string str;

    f->format(str,ga,ca);
    //printf("f=%s\n",str.c_str());
  }

  {
    SMS s;
    char *msg="#template=emailsmenotify#{from}=\"vtiunov@scs-900.ru\" {to}=\"79139163330@scs-900.ru\" {subj}=\"Re: SMS-сообщение\" {body}=\"Здравствуйте 79139163330,.Wednesday, June25, 2003, 3:11:15 PM, от Вас получено:.7s9r> Абонентом МТС в Новосибирске.7s9r>Вам отправлено сообщение:.7s9r>--.7s9r> Kak dela?.С уважением,Тиунов Вадим.Группа эксплуатации дополнительныхуслуг.ЗАО Сибирские Сотовые Системы - 900.телефон: +7(3832)141038.e-mail: vtiunov@scs-900.ru\"";
    short uni[2048];
    int len=ConvertMultibyteToUCS2(msg,strlen(msg),uni,sizeof(uni),CONV_ENCODING_CP1251);
    printf("len=%d\n",len);
    s.setIntProperty(Tag::SMPP_DATA_CODING,8);
    s.setIntProperty(Tag::SMPP_ESM_CLASS,0);
    s.setIntProperty(Tag::SMSC_DSTCODEPAGE,8);
    s.setBinProperty(Tag::SMPP_MESSAGE_PAYLOAD,(char*)uni,len);
    smsc::profiler::Profile p;
    p.codepage=8;
    p.locale="ru_ru";
    try{
      StateMachine::processDirectives(s,p,p);
    }catch(...)
    {
      printf("processDirectives FAILED!!!\n");
      return -1;
    }
    char buf[2048];
    getSmsText(&s,buf,sizeof(buf));
    printf("After directives:%s\n",buf);
  }


  for(int t=0;t<sizeof(tst)/sizeof(Test);t++)
  {

    SMS s;

    s.setIntProperty(Tag::SMPP_DATA_CODING,tst[t].dc);
    s.setIntProperty(Tag::SMPP_ESM_CLASS,0);
    s.setIntProperty(Tag::SMSC_DSTCODEPAGE,tst[t].dstdc);
    s.setBinProperty(Tag::SMSC_RAW_PAYLOAD,tst[t].msg,tst[t].sz);

    smsc::profiler::Profile p;
    p.codepage=0;
    StateMachine::processDirectives(s,p,p);

    if(partitionSms(&s,tst[t].dstdc)==psMultiple)
    {
      unsigned int len;
      ConcatInfo *ci=(ConcatInfo *)s.getBinProperty(Tag::SMSC_CONCATINFO,&len);
      for(int i=0;i<ci->num;i++)
      {
        SMS x=s;
        extractSmsPart(&x,i);
        char buf[256];
        int l=getSmsText(&x,buf,sizeof(buf));
        unsigned len;

        const char *m=x.getBinProperty(Tag::SMPP_SHORT_MESSAGE,&len);
        if(tst[t].dstdc==0)
        {
          static const char* escchars="[]{}^~\\|";
          int esccnt=0;
          for(int j=6;j<len;j++)if(strchr(escchars,m[j]))esccnt++;
          printf("%d: smslen=%d(%d)/%d\n",t,len,len+esccnt,l);
          if(len+esccnt>159)
          {
            printf("FUCK!!!!!!!!!!!!!!!!!!\n");
          }
          //printf("Part(%d)=%s\n",i,buf);
        }else
        {
          printf("%d: smslen=%d\n",t,len);
          if(len>140)
          {
            printf("FUCK!!!!!!!!!!!!!!!!!!\n");
          }
        }
      }
    }
  }
  {
    SMS s;
    s.setIntProperty(Tag::SMPP_DATA_CODING,8);
    s.setIntProperty(Tag::SMPP_ESM_CLASS,3);
    s.setIntProperty(Tag::SMSC_DSTCODEPAGE,0);

    s.setIntProperty(Tag::SMPP_SOURCE_PORT,12345);
    s.setIntProperty(Tag::SMPP_DESTINATION_PORT,11123);

    char msg[256];
    for(int i=0;i<250/2;i++)
    {
      msg[i*2]=0;
      msg[i*2+1]=32;
    }
    msg[250]=0;
    msg[251]=0;
    s.setBinProperty(Tag::SMSC_RAW_PAYLOAD,msg,250);
    int res=partitionSms(&s,0);
    if(res==psSingle)
    {
      printf("ESM_CLASS=%d\n",s.getIntProperty(Tag::SMPP_ESM_CLASS));
      unsigned len;
      const char *body=s.getBinProperty(Tag::SMPP_MESSAGE_PAYLOAD,&len);
      for(int i=0;i<len;i++)
      {
        printf("%02X ",body[i]);
      }
      printf("\n");
    }else
    {
      unsigned int len;
      ConcatInfo *ci=(ConcatInfo *)s.getBinProperty(Tag::SMSC_CONCATINFO,&len);
      for(int i=0;i<ci->num;i++)
      {
        printf("Part:%d\n",i);
        SMS x=s;
        extractSmsPart(&x,i);
        unsigned len;
        const char *body=x.getBinProperty(Tag::SMPP_SHORT_MESSAGE,&len);
        for(int i=0;i<len;i++)
        {
          printf("%02X ",body[i]);
        }
        printf("\n");
      }
    }
  }
  try{
    smsc::util::templates::OutputFormatter f("Your accurate balance is \\$$$string import=param1$$");
    smsc::util::templates::ContextEnvironment ce;
    ce.exportStr("param1","hello");
    std::string s;
    smsc::util::templates::GetAdapter* ga=0;
    f.format(s,*ga,ce);
  }catch(...)
  {
    printf("Shit happened\n");
  }
}
