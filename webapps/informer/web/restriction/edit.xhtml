<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:t="http://myfaces.apache.org/tomahawk"
      xmlns:tr="http://myfaces.apache.org/trinidad"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:eye="http://taglib.eyeline.mobi">

<ui:composition template="/templates/main.xhtml">

  <ui:param name="pageTitle" value="#{ restrictionEdit.restrictionId!=null ? msg['restriction.edit.title'] : msg['restriction.add.title']}"/>

  <ui:define name="content">

    <tr:form id="userForm" rendered="#{!restrictionEdit.initError}">

      <eye:message level="warn" rendered="#{!restrictionEdit.restrictionDaemonStarted}">
        <h:outputText value="#{msg['restriction.edit.daemon.over.warn']}"/>
      </eye:message>
      <eye:delimiter rendered="#{!restrictionEdit.restrictionDaemonStarted}"/>

      <eye:buttons>
        <eye:button>
          <tr:commandLink text="#{msg['done.button']}" action="#{restrictionEdit.save}"/>
        </eye:button>
        <eye:button>
          <tr:commandLink text="#{msg['cancel.button']}" action="RESTRICTIONS" immediate="true"/>
        </eye:button>
        <eye:space/>
      </eye:buttons>

      <tr:inputHidden id="restrictionId" value="#{restrictionEdit.restrictionId}"/>

      <eye:delimiter/>

      <h:panelGrid style="padding-left:10px" columns="2" columnClasses="column100Width, columnTopLeftAlign">

        <h:outputText style="white-space:nowrap;" value="#{msg['restriction.page.name']}"/>
        <tr:inputText value="#{restrictionEdit.restriction.name}"  simple="true"/>

        <h:outputText style="white-space:nowrap;" value="#{msg['restriction.page.startDate']}"/>
        <eye:inputDate value="#{restrictionEdit.restriction.startDate}" type="both" />

        <h:outputText style="white-space:nowrap;" value="#{msg['restriction.page.endDate']}"/>
        <eye:inputDate value="#{restrictionEdit.restriction.endDate}" type="both" />

        <h:outputText style="white-space:nowrap;" value="#{msg['restriction.page.allUsers']}"/>
        <t:selectBooleanCheckbox value="#{restrictionEdit.restriction.allUsers}"
                                     onchange="
                                     var shuttleDiv = document.getElementById('usersShuttle');
                                     shuttleDiv.style.display = this.checked ? 'none':'';
                                     "
            />

        <h:outputText style="white-space:nowrap;" value="&#160;"/>
        <h:panelGrid columns="2" columnClasses="column100Width, columnTopLeftAlign">
          <tr:selectManyShuttle id="usersShuttle" value="#{restrictionEdit.selectedUsers}"
                                leadingHeader="#{msg['restriction.page.availableUsers']}"
                                trailingHeader="#{msg['restriction.page.selectedUsers']}"

                                inlineStyle="display: #{restrictionEdit.restriction.allUsers==true ? 'none':''};">
            <f:selectItems value="#{restrictionEdit.users}"/>
          </tr:selectManyShuttle>
          <h:outputText value="&#160;"/>
        </h:panelGrid>

      </h:panelGrid>

      <eye:buttons>
        <eye:button>
          <tr:commandLink text="#{msg['done.button']}" action="#{restrictionEdit.save}"/>
        </eye:button>
        <eye:button>
          <tr:commandLink text="#{msg['cancel.button']}" action="RESTRICTIONS" immediate="true"/>
        </eye:button>
        <eye:space/>
      </eye:buttons>

    </tr:form>

  </ui:define>

</ui:composition>


</html>
