<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:tr="http://myfaces.apache.org/trinidad"
      xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:eye="http://taglib.eyeline.mobi">

<ui:composition template="/templates/main.xhtml">

  <ui:param name="pageTitle" value="#{msg['cp.resource.list']}"/>

  <ui:define name="content">

    <tr:form>

      <eye:dataTableFilter bean="#{cpList}" clearAction="clearFilter">
        <h:panelGrid columns="4" columnClasses="column50Width, column400Width, column50Width, columnTopLeftAlign">

          <h:outputText value="#{msg['user.edit.import.user']}"/>

          <h:selectOneMenu value="#{cpList.user}">
            <f:selectItem itemLabel="" itemValue=""/>
            <f:selectItems value="#{cpList.uniqueUsers}"/>
          </h:selectOneMenu>


          <h:outputText value="#{msg['user.edit.import.protocol']}"/>
          <h:selectOneMenu id="protocol" value="#{cpList.protocol}">
            <f:selectItem itemLabel="" itemValue=""/>
            <f:selectItems value="#{cpList.protocols}"/>
          </h:selectOneMenu>

        </h:panelGrid>
      </eye:dataTableFilter>

      <eye:delimiter/>

      <eye:buttons>

        <eye:button>
            <eye:menubar label="#{msg['add.button']} ...">
              <eye:menubaritem><tr:commandLink text="#{msg['cp.resource.protocol.ftp']}" action="FTP_RESOURCE_EDIT"/></eye:menubaritem>
              <eye:menubaritem><tr:commandLink text="#{msg['cp.resource.protocol.sftp']}" action="SFTP_RESOURCE_EDIT"/></eye:menubaritem>
              <eye:menubaritem><tr:commandLink text="#{msg['cp.resource.protocol.smb']}" action="SMB_RESOURCE_EDIT"/></eye:menubaritem>
              <eye:menubaritem><tr:commandLink text="#{msg['cp.resource.protocol.file']}" action="FILE_RESOURCE_EDIT"/></eye:menubaritem>
              <eye:menubaritem><tr:commandLink text="#{msg['cp.resource.protocol.localFtp']}" rendered="#{cpList.localFtpDeployed}" action="LOCAL_FTP_RESOURCE_EDIT"/></eye:menubaritem>
            </eye:menubar>
        </eye:button>
        <eye:button>
          <tr:commandLink text="#{msg['delete.button']}" shortDesc="#{msg['cp.resource.delete.selected']}"
                          action="#{cpList.removeSelected}" onclick="if (!confirm('#{msg['informer.delete.records']}')) return false" />
        </eye:button>
        <eye:space/>
      </eye:buttons>

      <eye:delimiter/>

      <eye:dataTable value="#{cpList.model}" var="m" selectedRows="#{cpList.selectedRows}">
        <eye:row rowId="#{m.user}|#{m.hashId}">
          <eye:column name="name" title="#{msg['user.edit.import.name']}" width="20%" align="center" sortable="true">
            <tr:commandLink action="#{m.editAction}" text="#{m.name}" shortDesc="#{msg['cp.resource.edit.desc']}">
              <f:param name="user_ID" value="#{m.user}"/>
              <f:param name="cp_settings_ID" value="#{m.hashId}"/>
            </tr:commandLink>
          </eye:column>
          <eye:column name="user" title="#{msg['user.edit.import.user']}" sortable="true" width="15%" align="center" defaultSortOrder="asc">
            <h:outputText value="#{m.user}"/>
          </eye:column>
          <eye:column name="protocol" title="#{msg['user.edit.import.protocol']}"  width="5%" align="center" sortable="true">
            <h:outputText style="white-space:nowrap;" value="#{m.protocol}" converter="protocolConverter"/>
          </eye:column>
          <eye:column name="host" title="#{msg['user.edit.import.host']}" width="20%" align="center">
            <h:outputText value="#{m.host}"/>
          </eye:column>
          <eye:column name="port" title="#{msg['user.edit.import.port']}" width="5%" align="center">
            <h:outputText rendered="#{m.port != null and m.port != 0}" value="#{m.port}"/>
          </eye:column>
          <eye:column name="directory" title="#{msg['user.edit.import.directory']}" width="25%" align="center">
            <h:outputText value="#{m.directory}"/>
          </eye:column>
        </eye:row>
      </eye:dataTable>

      <eye:delimiter/>

      <eye:buttons>

        <eye:button>
            <eye:menubar label="#{msg['add.button']} ...">
              <eye:menubaritem><tr:commandLink text="#{msg['cp.resource.protocol.ftp']}" action="FTP_RESOURCE_EDIT"/></eye:menubaritem>
              <eye:menubaritem><tr:commandLink text="#{msg['cp.resource.protocol.sftp']}" action="SFTP_RESOURCE_EDIT"/></eye:menubaritem>
              <eye:menubaritem><tr:commandLink text="#{msg['cp.resource.protocol.smb']}" action="SMB_RESOURCE_EDIT"/></eye:menubaritem>
              <eye:menubaritem><tr:commandLink text="#{msg['cp.resource.protocol.file']}" action="FILE_RESOURCE_EDIT"/></eye:menubaritem>
              <eye:menubaritem><tr:commandLink text="#{msg['cp.resource.protocol.localFtp']}" rendered="#{cpList.localFtpDeployed}" action="LOCAL_FTP_RESOURCE_EDIT"/></eye:menubaritem>
            </eye:menubar>
        </eye:button>
        <eye:button>
          <tr:commandLink text="#{msg['delete.button']}" shortDesc="#{msg['cp.resource.delete.selected']}"
                          action="#{cpList.removeSelected}" onclick="if (!confirm('#{msg['informer.delete.records']}')) return false" />
        </eye:button>
        <eye:space/>
      </eye:buttons>

    </tr:form>

  </ui:define>

</ui:composition>


</html>