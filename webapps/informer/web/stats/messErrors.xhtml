<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:tr="http://myfaces.apache.org/trinidad"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jstl/core"
      xmlns:eye="http://taglib.eyeline.mobi" xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="/templates/main.xhtml">

  <ui:param name="pageTitle" value="#{msg['informer.stats.by.errors.title']} '#{messErrors.deliveryName}'"/>

  <ui:define name="content">

    <tr:form>

      <h:inputHidden id="delivery" value="#{messErrors.deliveryId}"/>
      <h:inputHidden id="errors_stats_come_back_params" value="#{messErrors.backParams}"/>
      <h:inputHidden id="errors_stats_come_back" value="#{messErrors.backAction}"/>


      <eye:dataTableFilter bean="#{messErrors}" applyAction="start" clearAction="clearFilter">

        <h:panelGrid columns="2" columnClasses="column50Width, columnTopLeftAlign">
          <h:outputText style="white-space:nowrap;" value="#{msg['stat.page.aggregation']}"/>
          <h:selectOneMenu value="#{messErrors.groupType}">
            <f:selectItem itemLabel="" itemValue=""/>
            <f:selectItems value="#{messErrors.groupTypes}"/>
          </h:selectOneMenu>
        </h:panelGrid>

      </eye:dataTableFilter>

      <eye:delimiter/>

      <h:panelGroup rendered="#{messErrors.init}">
        <ui:include src="#{messErrors.aggregated ? 'messErrors_aggr.xhtml' : ''}"/>
        <ui:include src="#{!messErrors.aggregated ? 'messErrors_simple.xhtml' : ''}"/>
      </h:panelGroup>



      <eye:delimiter/>

      <eye:buttons rendered="#{messErrors.init}">
        <eye:button >
          <tr:commandLink text="#{msg['informer.stats.by.errors.back']}" action="#{messErrors.backAction}" immediate="true">
            <f:param value="#{messErrors.backParams}" name="errors_stats_come_back_params"/>
          </tr:commandLink>
        </eye:button>
        <eye:space/>
        <eye:button>
          <tr:commandLink text="#{msg['download.button']}" shortDesc="#{msg['informer.stats.by.errors.download']}">
            <tr:fileDownloadActionListener method="#{messErrors.download}" contentType="application/csv" filename="errors.csv"/>
          </tr:commandLink>
        </eye:button>
      </eye:buttons>


      <eye:buttons rendered="#{!messErrors.init}">
        <eye:button >
          <tr:commandLink text="#{msg['informer.stats.by.errors.back']}" action="#{messErrors.backAction}" immediate="true">
            <f:param value="#{messErrors.backParams}" name="errors_stats_come_back_params"/>
          </tr:commandLink>
        </eye:button>
        <eye:space/>
      </eye:buttons>

    </tr:form>

  </ui:define>

</ui:composition>


</html>
