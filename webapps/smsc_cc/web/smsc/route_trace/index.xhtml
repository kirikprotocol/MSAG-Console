<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:eye="http://jsfcomponents.eyeline.mobi"
      xmlns:smsc="http://taglib.smsc.mobi">

<ui:composition template="/templates/main.xhtml">

  <ui:param name="pageTitle" value="#{msg['route.trace.page.title']}"/>

  <ui:define name="styles">
    .column1 {width: 1px; text-align:right; white-space: nowrap;}
    .column2 {text-align: left;}
  </ui:define>

  <ui:define name="content">

    <h:form rendered="#{!routeTrace.initFailed}">

      <smsc:pageSubtitle value="#{msg['route.trace.page.trace.params']}"/>

      <h:panelGrid columns="2" columnClasses="column1, column2" style="padding: 10px">
        <h:outputText value="#{msg['route.trace.page.source']}"/>
        <eye:inputText value="#{routeTrace.sourceAddress}" required="true"/>

        <h:outputText value="#{msg['route.trace.page.destination']}"/>
        <eye:inputText value="#{routeTrace.destinationAddress}" required="true"/>

        <h:outputText value="#{msg['route.trace.page.sourceSme']}"/>
        <h:selectOneMenu value="#{routeTrace.sourceSmeId}">
            <f:selectItems value="#{routeTrace.smes}"/>
          </h:selectOneMenu>
      </h:panelGrid>

      <eye:buttons>
        <eye:button>
          <h:commandLink action="#{routeTrace.traceRoute}" value="#{msg['route.trace.page.traceRoute']}"/>
        </eye:button>
        <eye:space/>
      </eye:buttons>

      <p/>

      <h:panelGrid columns="1" columnClasses="column2" rendered="#{routeTrace.showTrace}">
        <h:panelGroup >
          <h:outputText value="#{msg['route.trace.page.routeFound']} : " style="color:GREEN;" rendered="#{routeTrace.routeFound}"/>
          <h:commandLink action="ROUTE_EDIT" value="#{routeTrace.trace.routeName}" immediate="true" rendered="#{routeTrace.routeFound}">
            <f:param name="route" value="#{routeTrace.trace.routeName}"/>
            <f:param name="showTrace" value="true"/>
            <f:param name="routeFound" value="true"/>
          </h:commandLink>
          <h:outputText value="#{msg['route.trace.page.routeNotFound']}" style="color:RED" rendered="#{!routeTrace.routeFound}"/>
        </h:panelGroup>

        <smsc:pageSubtitle value="#{msg['route.trace.page.trace']}"/>
        <h:inputTextarea value="#{routeTrace.traceLog}" readonly="true" style="width:100%"/>
      </h:panelGrid>

    </h:form>

  </ui:define>

</ui:composition>


</html>