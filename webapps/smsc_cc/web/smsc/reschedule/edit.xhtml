<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:eye="http://jsfcomponents.eyeline.mobi"
      xmlns:smsc="http://taglib.smsc.mobi"
      xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="/templates/main.xhtml">

  <ui:param name="pageTitle" value="#{msg['smsc.reschedule.edit']}"/>

  <ui:define name="styles">
    .column1 {width: 1px; text-align:right; white-space: nowrap;}
    .column2 {text-align: left;}
    .column3 {width: 300px;}
  </ui:define>

  <ui:define name="content">

    <h:form rendered="#{!rescheduleEdit.initFailed}">

      <eye:buttons>
        <eye:button>
          <h:commandLink value="#{msg['done.button']}" action="#{rescheduleEdit.done}">
            <f:param name="edit_initialized" value="true"/>
          </h:commandLink>
        </eye:button>
        <eye:button>
          <h:commandLink value="#{msg['cancel.button']}" action="RESCHEDULE" immediate="true"/>
        </eye:button>
        <eye:space/>
      </eye:buttons>

      <h:inputHidden value="#{rescheduleEdit.oldReschedule}"/>

      <h:panelGrid columns="2" columnClasses="column1, column2">
        <h:outputText value="#{msg['smsc.reschedule.edit.intervals']}"/>
        <eye:inputText value="#{rescheduleEdit.newReschedule}" required="true" cols="100">
          <smsc:validateRegExp pattern="#{rescheduleEdit.reschedulePattern}"
                               messageDetailNoMatch="#{msg['smsc.field.incorrect']}"/>
        </eye:inputText>
      </h:panelGrid>

      <h:panelGrid columns="2" columnClasses="column3, column2">
        <eye:dynamicTable value="#{rescheduleEdit.dynamicModel}">
            <eye:selectColumn name="code" values="#{rescheduleEdit.availableStatuses}"
                              uniqueValues="true" allowEditAfterAdd="false"/>
          </eye:dynamicTable>
      </h:panelGrid>

      <eye:buttons>
        <eye:button>
          <h:commandLink value="#{msg['done.button']}" action="#{rescheduleEdit.done}">
            <f:param name="edit_initialized" value="true"/>
          </h:commandLink>
        </eye:button>
        <eye:button>
          <h:commandLink value="#{msg['cancel.button']}" action="RESCHEDULE" immediate="true"/>
        </eye:button>
        <eye:space/>
      </eye:buttons>

    </h:form>
  </ui:define>

</ui:composition>


</html>
