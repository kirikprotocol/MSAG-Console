<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:eye="http://jsfcomponents.eyeline.mobi"
      xmlns:smsc="http://taglib.smsc.mobi">

<ui:composition template="/templates/main.xhtml">

  <ui:param name="pageTitle" value="#{msg['smsc.reschedule']}"/>

  <ui:define name="styles">
    .column1 {width: 1px; text-align:right; white-space: nowrap;}
    .column2 {text-align: left;}

    .rescheduleColumn {width: 98%}
  </ui:define>

  <ui:define name="content">

    <h:form rendered="#{!reschedule.initFailed}">

      <eye:message level="warn" rendered="#{reschedule.settingsChanged}"><h:outputText value="#{msg['smsc.submit.hint']}"/></eye:message>

      <h:inputHidden value="#{reschedule.revision}"/>
      
      <h:panelGrid columns="2" columnClasses="column1, column2" style="margin-left: 5px;">
        <h:outputText value="#{msg['smsc.reschedule.default']}"/>
        <eye:inputText value="#{reschedule.defaultReschedule}" required="true">
          <smsc:validateRegExp pattern="#{reschedule.reschedulePattern}" messageDetailNoMatch="#{msg['smsc.field.incorrect']}"/>
        </eye:inputText>
      </h:panelGrid>

      <p/>

      <eye:dataTable value="#{reschedule.rescheduleModel}" selectedRows="#{reschedule.selectedRows}" var="g">

        <eye:row innerData="#{!empty g.statuses}" opened="true">

          <eye:column name="reschedules" title="" columnClass="rescheduleColumn">
            <h:commandLink value="#{g.intervals}" action="#{reschedule.edit}">
              <f:param name="reschedule" value="#{g.intervals}"/>
            </h:commandLink>
          </eye:column>

          <f:facet name="innerData">
            <h:panelGroup >
              <h:dataTable value="#{g.statuses}" var="status" columnClasses="column50Width, columnTopLeftAlign">
                <h:column>
                  <h:outputText/>
                </h:column>
                <h:column>
                  <h:outputText value="#{status}" converter="smpp_status_converter"/>
                </h:column>
              </h:dataTable>
            </h:panelGroup>
          </f:facet>

        </eye:row>

      </eye:dataTable>

      <p/>

      <eye:buttons>
        <eye:button>
          <h:commandLink value="#{msg['add.button']}" id="add2" action="#{reschedule.edit}"/>
        </eye:button>
        <eye:button>
          <h:commandLink value="#{msg['delete.button']}" id="delete2" actionListener="#{reschedule.removeSelected}"
                          onclick="if (!confirm('#{msg['smsc.delete.records']}')) return false">
            <f:param name="delete" value=""/>
          </h:commandLink>
        </eye:button>
        <eye:space/>
        <eye:button><smsc:submitButton bean="#{reschedule}" action="submit"/></eye:button>
        <eye:button><smsc:resetButton bean="#{reschedule}" action="reset"/></eye:button>
      </eye:buttons>

    </h:form>

  </ui:define>

</ui:composition>


</html>
