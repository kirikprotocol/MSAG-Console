<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:t="http://myfaces.apache.org/tomahawk"
      xmlns:tr="http://myfaces.apache.org/trinidad"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:mo="http://eyeline.mobi"
      xmlns:eye="http://taglib.eyeline.mobi">

<ui:composition template="/templates/main.xhtml">

  <ui:define name="sme_title">
    <eye:pageTitle title="#{msg['smsc.reschedule']}"/>
  </ui:define>


  <ui:define name="content">


    <tr:form id="reschedule_list">

      <tr:messages partialTriggers="delete1 delete2" id="smsc_errors"/>

      <tr:inputHidden value="#{reschedule.index_initialized}" id="index_initialized"/>

      <tr:panelGroupLayout partialTriggers="delete1 delete2 :submit1 :submit2">
        <t:saveState value="#{reschedule.defaultReschedule}"/>
        <t:saveState value="#{reschedule.reschedules}"/>
      </tr:panelGroupLayout>

      <eye:buttons>
        <table>
          <tr>
            <td align="left">
              <tr:commandLink text="#{msg['add.button']}" id="add1" action="RESCHEDULE_EDIT"
                              actionListener="#{reschedule.edit}"
                              inlineStyle="font-family: Verdana, Arial, Helvetica, sans-serif;font-size: x-small;"
                  />
              <h:outputText value="&#160;&#160;|&#160;&#160;"/>
              <tr:commandLink text="#{msg['delete.button']}" id="delete1" partialSubmit="true"
                              actionListener="#{reschedule.removeSelected}"
                              inlineStyle="font-family: Verdana, Arial, Helvetica, sans-serif;font-size: x-small;"
                              onclick="if (!confirm('#{msg['smsc.delete.records']}')) return false"

                  />
            </td>
            <td align="right">
              <tr:commandLink text="#{msg['submit.button']}" id="submit1" actionListener="#{reschedule.submit}"
                              partialSubmit="true"
                              inlineStyle="font-family: Verdana, Arial, Helvetica, sans-serif;font-size: x-small;"
                  />
              <h:outputText value="&#160;&#160;|&#160;&#160;"/>
              <tr:commandLink text="#{msg['reset.button']}" action="RESCHEDULE" actionListener="#{reschedule.reset}"
                              inlineStyle="font-family: Verdana, Arial, Helvetica, sans-serif;font-size: x-small;"
                  />
            </td>
          </tr>
        </table>
      </eye:buttons>


      <h:panelGrid style="padding:10px" columns="1">


        <t:div styleClass="page_subtitle">
          <h:outputText value="#{msg['smsc.reschedule.subtitle']}"/>
        </t:div>

        <tr:panelGroupLayout partialTriggers="delete1 delete2 :submit1 :submit2">

          <h:panelGrid columns="1">
            <h:panelGrid columns="2" columnClasses="column20Width, columnTopLeftAlign" bgcolor="#F2EEDA">
              <h:outputText/>
              <tr:commandLink text="#{reschedule.defaultReschedule.intervals}" action="RESCHEDULE_EDIT"
                              actionListener="#{reschedule.edit}">
                <f:param name="reschedule" value="#{reschedule.defaultReschedule.intervals}"/>
              </tr:commandLink>
            </h:panelGrid>
            <h:panelGrid columns="2" columnClasses="column50Width, columnTopLeftAlign" bgcolor="#F8F6EE">
              <h:outputText/>
              <tr:outputText value="#{msg['smsc.reschedule.default']}"/>
            </h:panelGrid>
          </h:panelGrid>

          <tr:iterator value="#{reschedule.reschedules}" var="r">

            <h:panelGrid columns="2" columnClasses="column20Width, columnTopLeftAlign" bgcolor="#F2EEDA">
              <h:selectBooleanCheckbox value="#{r.checked}"/>
              <tr:commandLink text="#{r.intervals}" action="RESCHEDULE_EDIT" actionListener="#{reschedule.edit}">
                <f:param name="reschedule" value="#{r.intervals}"/>
              </tr:commandLink>
            </h:panelGrid>

            <h:dataTable value="#{r.statuses}" var="status" columnClasses="column50Width, columnTopLeftAlign"
                         bgcolor="#F8F6EE">
              <h:column>
                <tr:outputText/>
              </h:column>
              <h:column>
                <tr:outputText value="#{status.status}" converter="smpp_status_converter"/>
              </h:column>
            </h:dataTable>

          </tr:iterator>

        </tr:panelGroupLayout>

      </h:panelGrid>

      <eye:buttons>
        <table>
          <tr>
            <td align="left">
              <tr:commandLink text="#{msg['add.button']}" id="add2" action="RESCHEDULE_EDIT"
                              actionListener="#{reschedule.edit}"
                              inlineStyle="font-family: Verdana, Arial, Helvetica, sans-serif;font-size: x-small;"
                  />
              <h:outputText value="&#160;&#160;|&#160;&#160;"/>
              <tr:commandLink text="#{msg['delete.button']}" id="delete2" partialSubmit="true"
                              actionListener="#{reschedule.removeSelected}"
                              inlineStyle="font-family: Verdana, Arial, Helvetica, sans-serif;font-size: x-small;"
                              onclick="if (!confirm('#{msg['smsc.delete.records']}')) return false"

                  />
            </td>
            <td align="right">
              <tr:commandLink text="#{msg['submit.button']}" actionListener="#{reschedule.submit}" id="submit2"
                              inlineStyle="font-family: Verdana, Arial, Helvetica, sans-serif;font-size: x-small;"
                  />
              <h:outputText value="&#160;&#160;|&#160;&#160;"/>
              <tr:commandLink text="#{msg['reset.button']}" action="RESCHEDULE" actionListener="#{reschedule.reset}"
                              inlineStyle="font-family: Verdana, Arial, Helvetica, sans-serif;font-size: x-small;"
                  />
            </td>
          </tr>
        </table>
      </eye:buttons>


    </tr:form>

  </ui:define>

</ui:composition>


</html>
