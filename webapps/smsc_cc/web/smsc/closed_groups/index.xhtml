<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:eye="http://jsfcomponents.eyeline.mobi">

<ui:composition template="/templates/main.xhtml">

  <ui:param name="pageTitle" value="#{msg['smsc.smsc.closed_groups']}"/>

  <ui:define name="styles">
    <!-- FILTER -->
    .labelColumn {width: 1px; text-align:right; white-space: nowrap;}
    .valueColumn {width: 100px; text-align: left; padding-right: 10px; }
    .label2Column {width: 1px; text-align:right; white-space: nowrap; padding-left: 10px; border-left: 1px solid #E4E0CE;}
    .lastColumn {text-align: left;}

    <!-- DATA TABLE -->
    .idColumn {width: 10%}
    .nameColumn {width: 25%}
    .descColumn {width: 60%}
  </ui:define>

  <ui:define name="content">

    <h:form id="closed_groups" rendered="#{!closed_groups.outOfDate}">

      <eye:dataTableFilter applyAction="#{closed_groups.applyFilter}" clearAction="#{closed_groups.clearFilter}">
        <h:panelGrid columns="6" columnClasses="labelColumn, valueColumn, label2Column, valueColumn, label2Column, lastColumn">
          <h:outputText value="#{closedGroupsBundle.id}"/>
          <eye:inputText value="#{closed_groups.filterById}"/>

          <h:outputText value="#{closedGroupsBundle.name}"/>
          <eye:inputText value="#{closed_groups.filterByName}" />

          <h:outputText value="#{closedGroupsBundle.mask}"/>
          <eye:inputText value="#{closed_groups.filterByAddress}" />
        </h:panelGrid>

      </eye:dataTableFilter>

      <eye:dataTable value="#{closed_groups.closedGroupsModel}" selectedRows="#{closed_groups.selectedRows}" var="g">

        <eye:row innerData="#{!empty g.masks}" opened="true">

          <eye:column name="id" title="#{closedGroupsBundle.id}" columnClass="idColumn" sortable="true">
            <h:commandLink value="#{g.id}" action="CLOSED_GROUP_EDIT">
              <f:param name="closed_group" value="#{g.id}"/>
            </h:commandLink>
          </eye:column>

          <eye:column name="name" title="#{closedGroupsBundle.name}" columnClass="nameColumn" sortable="true">
            <h:commandLink value="#{g.name}" action="CLOSED_GROUP_EDIT">
              <f:param name="closed_group" value="#{g.id}"/>
            </h:commandLink>
          </eye:column>

          <eye:column name="description" title="#{closedGroupsBundle.description}" columnClass="descColumn">
            <h:commandLink value="#{g.description}" action="CLOSED_GROUP_EDIT">
              <f:param name="closed_group" value="#{g.id}"/>
            </h:commandLink>
          </eye:column>


          <f:facet name="innerData">
            <h:panelGroup>
              <h:dataTable value="#{g.masks}" var="m" columnClasses="column50Width, columnTopLeftAlign">
                <h:column>
                  <h:outputText/>
                </h:column>
                <h:column>
                  <h:outputText value="#{m}" converter="addressesConverter"/>
                </h:column>
              </h:dataTable>
            </h:panelGroup>
          </f:facet>

        </eye:row>

      </eye:dataTable>

      <eye:buttons>
        <eye:button>
          <h:commandLink value="#{msg['add.button']}" id="add2" action="CLOSED_GROUP_EDIT"/>
        </eye:button>
        <eye:button>
          <h:commandLink value="#{msg['delete.button']}" id="delete2" actionListener="#{closed_groups.removeSelected}"
                          onclick="if (!confirm('#{msg['smsc.delete.records']}')) return false">
            <f:param name="delete" value=""/>
          </h:commandLink>
        </eye:button>
        <eye:space/>
      </eye:buttons>

    </h:form>

  </ui:define>

</ui:composition>


</html>
