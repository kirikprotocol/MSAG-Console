<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:t="http://myfaces.apache.org/tomahawk"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:eye="http://jsfcomponents.eyeline.mobi"
      xmlns:smsc="http://taglib.smsc.mobi">

<ui:composition template="/templates/main.xhtml">

  <ui:param name="pageTitle" value="#{msg['smsc.user.edit']}"/>

  <ui:define name="styles">
    .column1 {width:1px; white-space:nowrap;}
    .column2 {width:100%; text-align: left; white-space:nowrap;}
  </ui:define>

  <ui:define name="content">

    <h:form id="userForm">

      <eye:buttons>
        <eye:button>
          <h:commandLink value="#{msg['done.button']}" id="done1" action="#{userEdit.done}">
            <f:param name="edit_initialized" value="true"/>
          </h:commandLink>
        </eye:button>
        <eye:button>
          <h:commandLink value="#{msg['cancel.button']}" id="cancel1" action="USERS" immediate="true"/>
        </eye:button>
        <eye:space/>
      </eye:buttons>

      <t:saveState value="#{userEdit.user}"/>
      <t:saveState value="#{userEdit.confirm}"/>
      <t:saveState value="#{userEdit.roles}"/>

      <h:inputHidden value="#{userEdit.oldLogin}"/>

      <h:panelGrid columns="2" columnClasses="column1, column2">

        <h:outputText value="#{userBundle.login}"/>
        <eye:inputText value="#{userEdit.user.login}" required="true" />

        <h:outputText value="#{userBundle.password}"/>
        <eye:inputText secret="true" id="password" value="#{userEdit.user.password}" required="true" />

        <h:outputText value="#{msg['smsc.user.edit.confirm']}"/>
        <eye:inputText secret="true" id="confirm" value="#{userEdit.confirm}" required="true" />

        <h:outputText value=""/>

        <eye:collapsingGroup label="#{userBundle.roles}">
          <h:dataTable value="#{userEdit.roles}" var="g" columnClasses="column1, column2">
            <h:column>
              <h:outputText value="#{g.name}" converter="roles_converter"/>
            </h:column>
            <h:column>
              <h:selectBooleanCheckbox value="#{g.checked}"/>
            </h:column>
          </h:dataTable>
        </eye:collapsingGroup>
        
        <h:outputText value=""/>

        <eye:collapsingGroup label="#{userBundle.prefs}">
          <h:panelGroup>

            <h:panelGrid columns="2" columnClasses="column1, column2">
              <h:outputLabel for="lang" value="#{userPrefsBundle.locale}"/>
              <h:selectOneMenu id="lang" value="#{userEdit.lang}" required="true">
                <f:selectItem itemValue="ru" itemLabel="ru"/>
                <f:selectItem itemValue="en" itemLabel="en"/>
              </h:selectOneMenu>
            </h:panelGrid>

            <eye:collapsingGroup label="#{msg['smsc.user.edit.topmon']}">
              <h:panelGrid columns="2" columnClasses="column1, column2">
                <h:outputLabel for="topMonGraphGrid" value="#{userPrefsBundle.topMonGraphGrid}"/>
                <eye:inputText id="topMonGraphGrid" value="#{userEdit.user.prefs.topMonGraphGrid}" required="true">
                  <smsc:validatePositive/>
                </eye:inputText>

                <h:outputLabel for="topMonGraphHead" value="#{userPrefsBundle.topMonGraphHead}"/>
                <eye:inputText id="topMonGraphHead" value="#{userEdit.user.prefs.topMonGraphHead}" required="true">
                  <smsc:validatePositive/>
                </eye:inputText>

                <h:outputLabel for="topMonGraphHigrid" value="#{userPrefsBundle.topMonGraphHigrid}"/>
                <eye:inputText id="topMonGraphHigrid" value="#{userEdit.user.prefs.topMonGraphHigrid}" required="true">
                  <smsc:validatePositive/>
                </eye:inputText>

                <h:outputLabel for="topMonGraphScale" value="#{userPrefsBundle.topMonGraphScale}"/>
                <eye:inputText id="topMonGraphScale" value="#{userEdit.user.prefs.topMonGraphScale}" required="true">
                  <smsc:validatePositive/>
                </eye:inputText>


                <h:outputLabel for="topMonMaxSpeed" value="#{userPrefsBundle.topMonMaxSpeed}"/>
                <eye:inputText id="topMonMaxSpeed" value="#{userEdit.user.prefs.topMonMaxSpeed}" required="true">
                  <smsc:validatePositive/>
                </eye:inputText>

              </h:panelGrid>
            </eye:collapsingGroup>
            <eye:collapsingGroup label="#{msg['smsc.user.edit.perfmon']}">

              <h:panelGrid columns="2" columnClasses="column1, column2">
                <h:outputLabel for="perfMonBlock" value="#{userPrefsBundle.perfMonBlock}"/>
                <eye:inputText id="perfMonBlock" value="#{userEdit.user.prefs.perfMonBlock}" required="true">
                  <smsc:validatePositive/>
                </eye:inputText>


                <h:outputLabel for="perfMonPixPerSecond" value="#{userPrefsBundle.perfMonPixPerSecond}"/>
                <eye:inputText id="perfMonPixPerSecond" value="#{userEdit.user.prefs.perfMonPixPerSecond}" required="true">
                  <smsc:validatePositive/>
                </eye:inputText>

                <h:outputLabel for="perfMonScale" value="#{userPrefsBundle.perfMonScale}"/>
                <eye:inputText id="perfMonScale" value="#{userEdit.user.prefs.perfMonScale}" required="true">
                  <smsc:validatePositive/>
                </eye:inputText>


                <h:outputLabel for="perfMonVLightGrid" value="#{userPrefsBundle.perfMonVLightGrid}"/>
                <eye:inputText id="perfMonVLightGrid" value="#{userEdit.user.prefs.perfMonVLightGrid}" required="true">
                  <smsc:validatePositive/>
                </eye:inputText>


                <h:outputLabel for="perfMonVMinuteGrid" value="#{userPrefsBundle.perfMonVMinuteGrid}"/>
                <eye:inputText id="perfMonVMinuteGrid" value="#{userEdit.user.prefs.perfMonVMinuteGrid}" required="true">
                  <smsc:validatePositive/>
                </eye:inputText>

              </h:panelGrid>
            </eye:collapsingGroup>

          </h:panelGroup>
        </eye:collapsingGroup>

        <h:outputText value="#{userBundle.firstName}"/>
        <eye:inputText value="#{userEdit.user.firstName}" required="true" />

        <h:outputText value="#{userBundle.lastName}"/>
        <eye:inputText value="#{userEdit.user.lastName}" required="true" />

        <h:outputText value="#{userBundle.dept}"/>
        <eye:inputText value="#{userEdit.user.dept}" required="true" />

        <h:outputText value="#{userBundle.workPhone}"/>
        <eye:inputText value="#{userEdit.user.workPhone}" required="true" >
          <smsc:validatePhone/>
        </eye:inputText>

        <h:outputText value="#{userBundle.homePhone}"/>
        <eye:inputText value="#{userEdit.user.homePhone}" required="true" >
          <smsc:validatePhone/>
        </eye:inputText>

        <h:outputText value="#{userBundle.cellPhone}"/>
        <eye:inputText value="#{userEdit.user.cellPhone}" required="true" >
          <smsc:validatePhone/>
        </eye:inputText>

        <h:outputText value="#{userBundle.email}"/>
        <eye:inputText value="#{userEdit.user.email}" required="true" >
          <smsc:validateEmail/>
        </eye:inputText>
      </h:panelGrid>

      <eye:buttons>
        <eye:button>
          <h:commandLink value="#{msg['done.button']}" id="done2" action="#{userEdit.done}"/>
        </eye:button>
        <eye:button>
          <h:commandLink value="#{msg['cancel.button']}" id="cancel2" action="USERS" immediate="true"/>
        </eye:button>
        <eye:space/>
      </eye:buttons>

    </h:form>
  </ui:define>

</ui:composition>


</html>
