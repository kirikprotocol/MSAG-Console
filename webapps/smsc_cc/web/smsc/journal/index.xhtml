<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:eye="http://jsfcomponents.eyeline.mobi">

<ui:composition template="/templates/main.xhtml">

  <ui:param name="pageTitle" value="#{msg['journal.page.title']}"/>

  <ui:define name="styles">
    .labelColumn {width: 1px; text-align:right; white-space: nowrap;}
    .valueColumn {width: 150px; text-align: left; padding-right: 10px; }
    .label2Column {width: 1px; text-align:right; white-space: nowrap; padding-left: 10px; border-left: 1px solid #E4E0CE;}
    .lastColumn {text-align: left;}
  </ui:define>

  <ui:define name="content">
    <h:form>

      <eye:dataTableFilter applyAction="#{journal.applyFilter}" clearAction="#{journal.clearFilter}">
        <h:panelGrid columns="4" columnClasses="labelColumn, valueColumn, label2Column, lastColumn">
          <h:outputText value="#{msg['journal.page.user']}"/>
          <eye:inputText value="#{journal.filterByUser}"/>

          <h:outputText value="#{msg['journal.page.subject']}"/>
          <h:selectOneMenu value="#{journal.filterBySubject}">
            <f:selectItems value="#{journal.uniqueSubjectNamesFromJournal}"/>
          </h:selectOneMenu>

          <h:outputText value="#{msg['journal.page.from_date']}"/>
          <eye:inputDate value="#{journal.filterByStartDate}" inputTime="true"/>

          <h:outputText value="#{msg['journal.page.till_date']}"/>
          <eye:inputDate value="#{journal.filterByEndDate}" inputTime="true"/>
        </h:panelGrid>
      </eye:dataTableFilter>

      <eye:dataTable value="#{journal.records}" var="rec">
        <eye:row>
          <eye:column name="time" title="#{msg['journal.page.time']}" sortable="true" width="10%" align="center"
                      defaultSortOrder="desc">
            <h:outputText value="#{rec.date}">
              <f:convertDateTime dateStyle="short" type="both"/>
            </h:outputText>
          </eye:column>
          <eye:column name="user" title="#{msg['journal.page.user']}" sortable="true" width="10%" align="center">
            <h:outputText value="#{rec.user}" title="#{rec.userDetails}"/>
          </eye:column>
          <eye:column name="subject" title="#{msg['journal.page.subject']}" sortable="true" width="10%" align="center">
            <h:outputText value="#{rec.subject}"/>
          </eye:column>
          <eye:column name="description" title="#{msg['journal.page.description']}" width="70%">
            <h:outputText value="#{rec.description}"/>
          </eye:column>
        </eye:row>
      </eye:dataTable>
    </h:form>
  </ui:define>

</ui:composition>

</html>