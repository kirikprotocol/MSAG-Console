<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:t="http://myfaces.apache.org/tomahawk"
      xmlns:tr="http://myfaces.apache.org/trinidad"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:eye="http://taglib.eyeline.mobi">

<ui:composition template="/templates/main.xhtml">

  <ui:param name="pageTitle" value="#{msg['journal.page.title']}"/>

  <ui:define name="content">
    <h:form>

      <eye:dataTableFilter bean="#{journal}" clearAction="clearFilter">
        <h:panelGrid columns="2" columnClasses="column300Width, columnTopLeftAlign">
          <h:panelGrid columns="2" columnClasses="column50Width, column400Width">
            <h:outputText value="#{msg['journal.page.user']}"/>
            <h:inputText value="#{journal.filterByUser}"/>
            <h:outputText value="#{msg['journal.page.from_date']}"/>
            <t:inputDate value="#{journal.filterByStartDate}" popupCalendar="true" type="full"/>
          </h:panelGrid>
          <h:panelGrid columns="2" columnClasses="column50Width, column400Width">
            <h:outputText value="#{msg['journal.page.subject']}"/>
            <h:selectOneMenu value="#{journal.filterBySubject}" >
              <f:selectItems value="#{journal.uniqueSubjectNamesFromJournal}"/>
            </h:selectOneMenu>
            <h:outputText value="#{msg['journal.page.till_date']}"/>
            <t:inputDate value="#{journal.filterByEndDate}" type="full" popupCalendar="true"/>
          </h:panelGrid>                    
        </h:panelGrid>
      </eye:dataTableFilter>

      <eye:dataTable value="#{journal.records}" var="rec">
        <eye:row>
          <eye:column name="time" title="#{msg['journal.page.time']}" sortable="true" width="10%" align="center" defaultSortOrder="desc">
            <h:outputText value="#{rec.date}">
              <f:convertDateTime dateStyle="short" type="both"/>
            </h:outputText>
          </eye:column>
          <eye:column name="user" title="#{msg['journal.page.user']}" sortable="true" width="10%" align="center">
            <h:outputText value="#{rec.user}" title="#{rec.userDetails}"/>
          </eye:column>
          <eye:column name="subject" title="#{msg['journal.page.subject']}" sortable="true" width="10%" align="center">
            <h:outputText value="#{rec.subject}"/>
          </eye:column>
          <eye:column name="description" title="#{msg['journal.page.description']}" width="70%">
            <h:outputText value="#{rec.description}"/>
          </eye:column>
        </eye:row>
      </eye:dataTable>
    </h:form>
  </ui:define>

</ui:composition>


</html>