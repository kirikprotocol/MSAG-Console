package mobi.eyeline.informer.admin.delivery.protogen.protocol;

import mobi.eyeline.protogen.framework.*;
import java.io.IOException;



/**
 * This class was generated by protogen, do not edit it
 */
public class AddDeliveryMessages implements PDU {
  int seqNum;
  Connection connection;
 
  int deliveryId;
  boolean deliveryIdFlag=false;
  DeliveryMessage [] messages;
  boolean messagesFlag=false;

  public AddDeliveryMessages() {
  }
 

  public AddDeliveryMessages(int seqNum, int deliveryId , DeliveryMessage []messages) {
 
    this.seqNum = seqNum;
    this.deliveryId = deliveryId;
    this.deliveryIdFlag = true;
    this.messages = messages;
    this.messagesFlag = true;
  }
 
  public int getTag() {
    return 35;
  }

  public void clear() {
    deliveryIdFlag=false;
    messagesFlag=false;
  }
 
  public void debug(StringBuilder sb) {
    sb.append("seqNum=").append(seqNum).append(';');

    if(deliveryIdFlag) { sb.append("deliveryId=") .append(deliveryId).append(';'); }
    if(messagesFlag) {
      sb.append("messages").append('[');
      for(DeliveryMessage value : messages) {
        sb.append(value.toString()).append(',');
      }
      sb.setLength(sb.length()-1);
      sb.append(']');
    }
  }
 
  public String toString() {
    StringBuilder sb=new StringBuilder(128);
    sb.append("AddDeliveryMessages:");
    debug(sb);
    return sb.toString();
  }

  public int getSeqNum() {
    return seqNum;
  }

  public void setSeqNum(int seqNum) {
    this.seqNum = seqNum;
  }
 
  public int assignSeqNum() {
    seqNum = PDU.seqGenerator.incrementAndGet();
    return seqNum;
  }
 
  public Connection getConnection() {
    return connection;
  }
 
  public void setConnection( Connection con ) {
    connection = con;
  }

  public int getDeliveryId() throws AccessToUndefinedFieldException {
    if(!deliveryIdFlag) throw new AccessToUndefinedFieldException("deliveryId");
    return deliveryId;
  }

  public void setDeliveryId(int deliveryId) {
    this.deliveryId = deliveryId;
    this.deliveryIdFlag = true;
  }
 
  public boolean hasDeliveryId() {
    return deliveryIdFlag;
  }
  public DeliveryMessage [] getMessages() throws AccessToUndefinedFieldException {
    if(!messagesFlag) throw new AccessToUndefinedFieldException("messages");
    return messages;
  }

  public void setMessages(DeliveryMessage [] messages) {
    this.messages = messages;
    this.messagesFlag = true;
  }
 
  public boolean hasMessages() {
    return messagesFlag;
  }

  public void encode(BufferWriter writer) throws IOException {
    if(deliveryIdFlag) {
      writer.writeTag(1); // tag id
      writer.writeIntLV(deliveryId);
    }  else throw new MissingMandatoryFieldException("deliveryId");
    if(messagesFlag) {
      writer.writeTag(2); // tag id
      int pos=writer.size();
      writer.writeLength(0);
      int off=writer.size();
      for(DeliveryMessage v:messages)
      {
        v.encode(writer);
      }
      writer.replaceLength((writer.size()-off), pos);
    }  else throw new MissingMandatoryFieldException("messages");
    writer.writeTag(0xFF); // end message tag
  }

  public void decode(BufferReader reader) throws IOException {
    while( true ) {
      int tag = reader.readTag();
      if( tag == 0xFF ) break;
      switch( tag ) {
        case 1: {
          deliveryId = reader.readIntLV();
          deliveryIdFlag=true;
        } break;
        case 2: {
          int sz=reader.readLength();
          java.util.ArrayList<DeliveryMessage> arr=new java.util.ArrayList<DeliveryMessage>();
          int startOff=reader.offset();
          while(reader.offset()<startOff+sz) {
            DeliveryMessage item=new DeliveryMessage();
            item.decode(reader);
            arr.add(item);
          }
          messages=new DeliveryMessage[arr.size()];
          arr.toArray(messages);
          messagesFlag=true;
        } break;
        default:
          throw new IOException( "unknown tagId: "+tag +" seqnum: "+seqNum +" msg: "+AddDeliveryMessages.class.getName());      }
    }
  }
}
