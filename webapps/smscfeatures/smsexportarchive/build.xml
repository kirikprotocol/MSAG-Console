<project default="update" name="export archive module for SMSC webapp">
  <property name="java_out" location="${BUILD_DIR}/classes/smsc"/>
  
  <fileset id="common_libs" dir="../../libs/" includes="log4j.jar antlr.jar nsjsp.jar classes12.jar nls_charset12.jar connpool.jar"/>
  <fileset id="webapps_libs" dir="../../smsc/WEB-INF/lib" includes="taglibs-input.jar"/>
    
  <path id="classpath">
   <pathelement path="${java_out}"/>
   <fileset refid="common_libs"/>
   <fileset refid="webapps_libs"/>
   <fileset dir="${CATALINA_HOME}/common/lib" includes="servlet.jar"/>
   <fileset dir="${CATALINA_HOME}/server/lib" includes="catalina.jar"/>
  </path>

  <target name="copy">
    <mkdir dir="exploded"/>
      
    <echo message="Compiling export archive"/>
    <javac srcdir="./WEB-INF/src/" destdir="exploded" classpathref="classpath" debug="yes" target="1.4" source="1.4" listfiles="yes"/>

    <jar jarfile="./exportarchive.jar">
     <fileset dir="exploded"/>
    </jar>
							    
    <copy todir="${WEBINF_DIR}/lib">
      <fileset dir=".">
        <include name="exportarchive.jar"/>
      </fileset>
    </copy>
  </target>
</project>