<?xml version="1.0" encoding="windows-1251"?>
<!DOCTYPE scenarios SYSTEM "file:///scenarios.dtd">
<scenarios>
  <scenario id="0" active="1" sms="1" ussd="2" resources="resources.xml">

    <page id="MAIN_PAGE" question="0">
      <!-- Show MAIN dialog & set MAIN attribute -->
      <pageExecutor class="ru.sibinco.mci.profile.MainExecutor">
        <bundle name="system"/>
      </pageExecutor>
      <command name="1" target="divert_mgr"/>
      <command name="2" target="profile_mgr"/>
      <command name="3" target="smshelp_mgr"/>
      <command name="(**)" target="MAIN_PAGE"/>
    </page>

    <page id="divert_mgr" question="0">
      <!-- 1) if (!MAIN attr && !"0") set divert value for option (выкл/сервис/голос.почта/тел.номер)
           2) remove MAIN attribute -->
      <pagePreProcessor class="ru.sibinco.mci.profile.DivertManagerPreprocessor">
        <bundle name="divert"/>
      </pagePreProcessor>
      <!-- 1) Query divert info
           2) Show divert info & resons dialog -->
      <pageExecutor class="ru.sibinco.mci.profile.DivertManagerExecutor">
        <bundle name="divert"/>
      </pageExecutor>
      <command name="1" target="divert_set"/>   <!-- занят       -->
      <command name="2" target="divert_set"/>   <!-- отсутств.   -->
      <command name="3" target="divert_set"/>   <!-- не доступен -->
      <command name="4" target="divert_set"/>   <!-- безусл.     -->
      <command name="(**)" target="MAIN_PAGE"/>
    </page>
    <page id="divert_set" question="0">
      <!-- Set divert reason attribute (занят/отсутств./не доступен/безусл.) -->
      <pagePreProcessor class="ru.sibinco.mci.profile.DivertSetPreprocessor"/>
      <!-- Show alternatives for select divert value -->
      <pageExecutor class="ru.sibinco.mci.profile.DivertSetExecutor">
        <bundle name="divert"/>
      </pageExecutor>
      <command name="0" target="divert_mgr"/>    <!-- назад       -->
      <command name="1" target="divert_mgr"/>    <!-- выкл        -->
      <command name="2" target="divert_mgr"/>    <!-- сервис      -->
      <command name="3" target="divert_mgr"/>    <!-- голос.почта -->
      <command name="(**)" target="divert_mgr"/> <!-- тел.номер -->
    </page>

    <page id="profile_mgr" question="0">
      <segment>
        <data>
Profile:
Not implemented yet
        </data>
      </segment>
      <command name="(**)" target="MAIN_PAGE"/>
    </page>

    <page id="smshelp_mgr" question="0">
      <segment>
        <data>
SMS-Help:
Not implemented yet
        </data>
      </segment>
      <command name="(**)" target="MAIN_PAGE"/>
    </page>


  </scenario>
</scenarios>
