<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE config SYSTEM "file://configuration.dtd">

<!-- INMan interacts the IN node -->
<config> <!-- InMan 0.4.2. and higher -->
  <param name="host" type="string">@inman.host@</param>  <!-- InMan service host -->
  <param name="port" type="int">@inman.port@</param>     <!-- InMan service port -->
  <param name="maxClients" type="int">3</param>       <!--  max allowed INMan client connections, default: 3 -->

  <section name="Billing">
    <param name="billMode" type="string">all</param>       <!-- options: [none, all, ussd, sms]
      none: don't request IN platform write CDR instead
      all:     always reqiest IN platform
      ussd: request IN platform in case of USSD only, bill SMS to CDR
      sms:  request IN platform in case of SMS only, bill USSD to CDR
    -->
    <param name="abonentPolicy" type="string">DB_Contract</param> <!-- 
      optional name of abonent provider to use (defined in section AbonentProviders) 
      for getting abonent contract type , if it missing the IN is interacted basing on
      IN_interaction.RPCList_postpaid setting.
     -->
    <param name="maxBillings" type="int">20</param>   <!--  [1 .. 100000] , default 500 
     maximium simultaneous billing requests per INMan client  connect -->
    <param name="abonentTypeTimeout" type="int">5</param> <!-- units: seconds, [1 .. 65535], default 5 
    maximum allowed time for determining abonent type, (HLR & DB interaction),
    billing continues on its expiration in CDR mode -->
    <param name="maxTimeout" type="int">20</param>  <!-- units: seconds, [5 .. 65535], default 120 
    maximum allowed value for billing suspending time (SMSC interaction), billing aborts on its expiration  -->

    <param name="cdrDir" type="string">./cdrs</param>  <!-- directory to store CDRs -->
    <param name="cdrInterval" type="int">120</param>   <!-- CDR storage rolling interval, units: seconds -->
    <param name="cdrMode" type="string">all</param>    <!-- options: [none, all, postpaid]
      none:  don't write CDR at all
      all:      always write CDR
      postpaid:  write CDR either for POSTPAID abonents or in case of IN platform interaction error
    -->
    <param name="cacheRAM" type="int">40</param>   <!-- abonents cache RAM buffer size, units: Mb -->
    <param name="cacheInterval" type="int">2</param>   <!-- abonent info refreshing interval, units: minutes -->
    <param name="cacheDir" type="string">./cache</param>  <!-- directory to store abonents cache -->
    <param name="cacheRecords" type="int">1</param>  <!-- initial number of cache file records, 
     units: abonents :) , default: 10000 -->
  </section>

  <section name="IN_interaction"> <!-- IN platform interaction parameters -->
    <param name="ssfAddress" type="string">@inman.ssfAddress@</param>  <!-- InMan address -->
    <param name="ssn" type="int">146</param>
    <param name="scfAddress" type="string">@inman.scfAddress@</param>  <!-- IN point address -->
    <param name="serviceKey" type="int">11</param>         <!-- IN service key: uint32_t -->
    <!-- OPTIONAL PARAMETERS follow:: -->
    <param name="ss7UserId" type="int">03</param>     <!-- PortSS7 user id [1..20], default: 03  -->
    <param name="IN_Timeout" type="int">20</param>   <!-- timeout on CAP operations, units: seconds, max: 65535, default 20 -->
    <param name="maxDialogs" type="int">2000</param>   <!-- maximum number of simultaneous TC dialogs, [2..65530], default 2000-->

    <param name="RPCList_reject" type="string"></param> <!--
     comma separated list of extra (in addition to 21) RP MO causes 
     returned by IN platform, which forbid DP processing because of low balance (if supported) 
     format: rpc1,rpc2,rpc3,.. 
     example(Alcatel): 16
    -->
    <param name="RPCList_postpaid" type="string"></param> <!--
     comma separated list of RP MO causes returned by IN platform for postpaid abonents (if supported),
     format: rpc1,rpc2,rpc3,..
     example (Huawei): 41 
    -->
 </section>

  <section name="AbonentProviders">
      <section name="HLR_SRI">
          <param name="loadup" type="string">libinman_iap_sri.so</param>
          <section name="Config"> 
              <param name="ownAddress" type="string">@inman.ssfAddress@</param>  <!-- Provider ISDN address -->
              <param name="ownSsn" type="int">146</param>
              <param name="maxQueries" type="int">500</param>  <!--  max allowed simultaneous HLR queries -->
              <param name="mapTimeout" type="int">20</param>   <!-- timeout on MAP operations, units: seconds, max: 65535, default 20 -->
              <param name="msrnTimeout" type="int">300</param>  <!--  msrnExpiration timeout, units: secs -->
          </section>
      </section>

  <!-- abonent contract/gsmSCF params  providers -->
      <section name="DB_Contract"> <!-- DB provides abonent contract (prepaid or postpaid) only -->
          <param name="loadup" type="string">libinman_iap_db.so</param>
          <section name="Config">
              <section name="DataSource">
                 <param name="type" type="string">OCI</param> <!-- Oracle DB -->
                 <param name="dbInstance" type="string">@inman.db.instance@</param>
                 <param name="dbUserName" type="string">@inman.db.userid@</param>
                 <param name="dbUserPassword" type="string">@inman.db.PasSword@</param>
                 <param name="connections" type="int">5</param>  <!--  max allowed db connections -->
                 <param name="maxQueries" type="int">15</param>  <!--  max allowed db queries -->
                 <param name="watchdog" type="bool">true</param>  <!--  turn on timeouts handling -->
                 <param name="timeout" type="int">15</param>  <!--  timeout on connection queries, units: secs  [1..65535] -->

                <!--  SQL function returning Abonent type has following prototype:
                       FUNCTION abonentQueryFunc (iqueryFuncArg  IN VARCHAR) RETURN NUMBER
                 -->
                 <param name="abonentQueryFunc" type="string">@inman.db.abonentQueryFunc@</param>
                 <param name="queryFuncArg" type="string">@inman.db.queryFuncArg@</param>
              </section>
             <section name="DataSourceDrivers">
                 <section name="OCIDataSourceDriver">
                     <param name="type" type="string">OCI</param>
                     <param name="loadup" type="string">libdb_oci.so</param>
                 </section>
             </section>
          </section>
      </section> <!-- DB_Contract -->

  </section> <!-- AbonentProviders -->
</config>

<!--
SCCP configuration

GT           =  SSN

79139869981  = 146
791398699810 =   7
791398699811 = 160
79139869998  =   6
79139869999  =   8
-->

